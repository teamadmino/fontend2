!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("adm.@angular/common"),require("adm.tslib"),require("adm.@angular/forms"),require("adm.@angular/cdk"),require("adm.@angular/animations"),require("adm.@angular/material"),require("adm.rxjs"),require("adm.lodash"),require("adm.rxjs/operators"),require("adm.shared"),require("adm.@angular/core")):"function"==typeof define&&define.amd?define(["adm.@angular/common","adm.tslib","adm.@angular/forms","adm.@angular/cdk","adm.@angular/animations","adm.@angular/material","adm.rxjs","adm.lodash","adm.rxjs/operators","adm.shared","adm.@angular/core"],t):"object"==typeof exports?exports.scanner=t(require("adm.@angular/common"),require("adm.tslib"),require("adm.@angular/forms"),require("adm.@angular/cdk"),require("adm.@angular/animations"),require("adm.@angular/material"),require("adm.rxjs"),require("adm.lodash"),require("adm.rxjs/operators"),require("adm.shared"),require("adm.@angular/core")):e.scanner=t(e["adm.@angular/common"],e["adm.tslib"],e["adm.@angular/forms"],e["adm.@angular/cdk"],e["adm.@angular/animations"],e["adm.@angular/material"],e["adm.rxjs"],e["adm.lodash"],e["adm.rxjs/operators"],e["adm.shared"],e["adm.@angular/core"])}("undefined"!=typeof self?self:this,function(e,t,n,o,r,i,a,c,s,l,d){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,(function(t){return e[t]}).bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/assets/plugins/scanner",n(n.s=0)}({0:function(e,t,n){e.exports=n("P+m1")},"0S4P":function(t,n){t.exports=e},"17wl":function(e,n){e.exports=t},"3xDq":function(e,t){e.exports=n},"7zYK":function(e,t){e.exports=o},"9gj6":function(e,t){e.exports=r},MdUB:function(e,t){e.exports=i},"P+m1":function(e,t,n){"use strict";n.r(t),n.d(t,"ScannerModule",function(){return Ne});var o=n("MdUB"),r=n("0S4P"),i=n("YLtl"),a=n("aP7H"),c=n("Vgaj"),s=n("vOrQ"),l=function(){function e(){this.keyboardMode=!1,this.JSON_PREFIX="scanner_",this.JSON_DOLGOZOK=this.JSON_PREFIX+"dolgozok",this.JSON_UTCAK=this.JSON_PREFIX+"utcak",this.JSON_VERSION=this.JSON_PREFIX+"version",this.JSON_BEOLVASASOK=this.JSON_PREFIX+"beolvasasok",this.JSON_SYNCID=this.JSON_PREFIX+"syncid",this.JSON_SYNCEDTILL=this.JSON_PREFIX+"syncedTill",this.JSON_POS=this.JSON_PREFIX+"beolvpos",this.online=!1,this.popups=[],this.popupClosedEvent=new c.Subject,this.scanner=null,this.page=new c.BehaviorSubject(0),this.next=new c.Subject,this.prev=new c.Subject,this.newBeolvasasEvent=new c.Subject,this.newErrorEvent=new c.Subject,this.syncEvent=new c.Subject,this.syncId=-1,this.syncedTill=0,this.labels=[[{label:"Bejelentkez\xe9s",iconright:"navigate_next",func:"next",color:"accent"}],[{label:"Kil\xe9p\xe9s",iconleft:"navigate_before",func:"prev"},{label:"Fakk",iconright:"navigate_next",func:"next",color:"accent"}],[{label:"Utca",iconleft:"navigate_before",func:"prev"},{label:"Adatfelvitel",iconright:"navigate_next",func:"next",color:"accent"}],[{label:"Utca",iconleft:"navigate_before",func:"doubleprev"},{label:"Fakk",iconleft:"navigate_before",func:"prev"}]],this.selectedUtca={},this.selectedFakk=null,this.dolgozo={},this.dataLoaded=!1,this.version=null,this.dolgozok=[],this.utcak=[],this.beolvasasChunks=null,this.logoutTimer=null,this.maxInactivity=36e5,this.logoutRestartEvent=new c.Subject,this.chunkSize=10,this.chunkNum=50,this.beolvasasmax=this.chunkSize*this.chunkNum,this.pos={start:0,length:0}}return e.prototype.init=function(){var e=this;this.logoutRestartEventSub=this.logoutRestartEvent.pipe(Object(a.debounceTime)(500)).subscribe(function(t){e.page.value>0&&e.restartTimer()})},e.prototype.loadConfig=function(){this.utcak=JSON.parse(localStorage.getItem(this.JSON_UTCAK)),this.dolgozok=JSON.parse(localStorage.getItem(this.JSON_DOLGOZOK)),this.version=JSON.parse(localStorage.getItem(this.JSON_VERSION)),this.syncId=JSON.parse(localStorage.getItem(this.JSON_SYNCID)),this.syncId=null==this.syncId?-1:this.syncId,this.syncedTill=JSON.parse(localStorage.getItem(this.JSON_SYNCEDTILL)),this.syncedTill=null==this.syncedTill?0:this.syncedTill,this.beolvasasChunks=this.createChunkArrays(),this.loadBeolvasasChunks(),this.pos=JSON.parse(localStorage.getItem(this.JSON_POS)),this.pos=this.pos?this.pos:{start:0,length:0}},e.prototype.createChunkArrays=function(){for(var e={},t=0;t<this.chunkNum;t++)e[this.JSON_BEOLVASASOK+"_"+t]=[];return e},e.prototype.loadBeolvasasChunks=function(){for(var e=0;e<localStorage.length;e++){var t=localStorage.key(e);if(t.startsWith(this.JSON_BEOLVASASOK+"_")){var n=localStorage.getItem(localStorage.key(e));this.beolvasasChunks[t]=this.beolvasasChunks[t].concat(JSON.parse(n))}}},e.prototype.updateConfig=function(e,t,n){(void 0===this.version||this.version<e)&&(localStorage.setItem(this.JSON_UTCAK,JSON.stringify(t)),localStorage.setItem(this.JSON_DOLGOZOK,JSON.stringify(n)),localStorage.setItem(this.JSON_VERSION,JSON.stringify(e)),this.dolgozok=n,this.utcak=t,this.version=e)},e.prototype.setSyncedTill=function(e){this.syncedTill=e,localStorage.setItem(this.JSON_SYNCEDTILL,JSON.stringify(e))},e.prototype.logActivity=function(){this.logoutRestartEvent.next()},e.prototype.restartTimer=function(){var e=this;this.stopLogoutTimer(),this.logoutTimer=setTimeout(function(t){e.popups.push({}),e.page.next(0),e.reset()},this.maxInactivity)},e.prototype.stopLogoutTimer=function(){this.logoutTimer&&clearTimeout(this.logoutTimer),this.logoutTimer=null},e.prototype.getAllBeolvasas=function(){for(var e=[],t=0,n=Object.keys(this.beolvasasChunks);t<n.length;t++)e=e.concat(this.beolvasasChunks[n[t]]);return e.sort(function(e,t){return e.id<t.id?-1:e.id>t.id?1:0}),e},e.prototype.getUnsyncedBeolvasasok=function(){var e=this,t=[];return this.getAllBeolvasas().forEach(function(n){n.id>e.syncedTill&&t.push(n)}),{version:this.version,scanner:this.scanner,data:t}},e.prototype.add=function(e,t){this.syncId++,e.id=this.syncId,e.datum=new Date,e.dolgozo=this.dolgozo.id,e.dolgozoNev=this.dolgozo.nev;var n=Math.floor(t/this.chunkSize),o=this.JSON_BEOLVASASOK+"_"+n;return this.beolvasasChunks[o][t-n*this.chunkSize]=e,localStorage.setItem(o,JSON.stringify(this.beolvasasChunks[o])),localStorage.setItem(this.JSON_POS,JSON.stringify({start:this.pos.start,length:this.pos.length})),localStorage.setItem(this.JSON_SYNCID,JSON.stringify(this.syncId)),this.newBeolvasasEvent.next(e),!0},e.prototype.addBeolvasas=function(e){var t=(this.pos.start+this.pos.length)%this.beolvasasmax;return this.pos.length===this.beolvasasmax?this.syncId-this.syncedTill>=this.beolvasasmax?(this.newErrorEvent.next({error:"Mem\xf3ria betelt",description:"K\xe9rem szinkroniz\xe1ljon a szerverrel"}),!1):(this.pos.start=(this.pos.start+1)%this.beolvasasmax,this.add(e,t)):(this.pos.length++,this.add(e,t))},e.prototype.reset=function(){this.selectedFakk=null,this.selectedUtca=null,this.dolgozo=null},e.prototype.destroy=function(){this.stopLogoutTimer(),this.logoutRestartEventSub&&(this.logoutRestartEventSub.unsubscribe(),this.logoutRestartEventSub=null)},e.\u0275prov=s["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac=function(t){return new(t||e)}}),e}(),d=n("cfyg"),u=function(){function e(){this.ns=5,this.sounds=[],this.sources=["/assets/sounds/beep.mp3","/assets/sounds/error.mp3"],this.playing=[];for(var e=0;e<this.ns;e++)this.sounds.push([]);for(e=0;e<this.sources.length;e++)for(var t=0;t<this.ns;t++)this.sounds[t].push(new Audio(this.sources[e]));for(e=0;e<this.sources.length;e++)this.playing[e]=0}return e.prototype.playSound=function(e,t){void 0===t&&(t=1),this.sounds[this.playing[e]][e].volume=t<=1&&t>=0?t:1,this.sounds[this.playing[e]][e].play(),this.playing[e]+=1,this.playing[e]>=this.ns&&(this.playing[e]=0)},e.\u0275prov=s["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac=function(t){return new(t||e)}}),e}(),p=["btnRef"],g=function(){function e(e){this.scannerService=e}return e.prototype.keyDown=function(e){("Enter"===e.key||"Escape"===e.key)&&(this.close(),e.preventDefault())},e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){var e=this;setTimeout(function(){e.btnRef.nativeElement.focus()})},e.prototype.handleClick=function(){this.close()},e.prototype.close=function(){this.scannerService.popups.splice(this.scannerService.popups.indexOf(this.popupData),1),this.scannerService.popupClosedEvent.next()},e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](l))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["admino-popup"]],viewQuery:function(e,t){var n;1&e&&s["\u0275\u0275staticViewQuery"](p,!0,s.ElementRef),2&e&&s["\u0275\u0275queryRefresh"](n=s["\u0275\u0275loadQuery"]())&&(t.btnRef=n.first)},hostBindings:function(e,t){1&e&&s["\u0275\u0275listener"]("keydown",function(e){return t.keyDown(e)})},inputs:{popupData:"popupData"},decls:6,vars:2,consts:[[1,"popup","highlight-background"],["mat-flat-button","",3,"type","color","click"],["btnRef",""]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"div",0),s["\u0275\u0275elementStart"](1,"p"),s["\u0275\u0275text"](2," A rendszer t\xe9tlens\xe9g miatt kijelentkeztetett! "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"button",1,2),s["\u0275\u0275listener"]("click",function(){return t.handleClick()}),s["\u0275\u0275text"](5," Ok "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("type","button")("color","primary"))},directives:[o.MatButton],styles:["[_nghost-%COMP%]{text-align:center;display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;padding:15px}.popup[_ngcontent-%COMP%]{border-radius:5px;display:inline-block;padding:15px}"]}),e}();function h(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",1),s["\u0275\u0275elementStart"](1,"div"),s["\u0275\u0275elementStart"](2,"h1"),s["\u0275\u0275text"](3),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"h2"),s["\u0275\u0275text"](5),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate1"](" ",n.error.error," "),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](n.error.description)}}var m=function(){function e(e,t){var n=this;this.cd=e,this.scannerService=t,this.ngUnsubscribe=new c.Subject,this.showError=!1,this.error={},this.scannerService.newErrorEvent.pipe(Object(a.takeUntil)(this.ngUnsubscribe)).subscribe(function(e){n.error=e,n.playError()})}return e.prototype.playError=function(){this.showError=!1,this.cd.detectChanges(),this.showError=!0},e.prototype.ngOnInit=function(){},e.prototype.ngOnDestroy=function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()},e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](s.ChangeDetectorRef),s["\u0275\u0275directiveInject"](l))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["admino-erroroverlay"]],decls:1,vars:1,consts:[["class","error color-warn",4,"ngIf"],[1,"error","color-warn"]],template:function(e,t){1&e&&s["\u0275\u0275template"](0,h,6,2,"div",0),2&e&&s["\u0275\u0275property"]("ngIf",t.showError)},directives:[r.NgIf],styles:["[_nghost-%COMP%]{pointer-events:none}.error[_ngcontent-%COMP%], [_nghost-%COMP%]{position:absolute;width:100%;height:100%}.error[_ngcontent-%COMP%]{-webkit-animation:fadeOutError 2s linear 0s forwards;animation:fadeOutError 2s linear 0s forwards;text-align:center;background-color:rgba(var(--theme-background-600),.9);border-radius:5px;padding:15px;z-index:101;display:flex;align-items:center;justify-items:center}.error[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{flex:1}@-webkit-keyframes fadeOutError{0%{opacity:1}50%{opacity:1}to{opacity:0}}@keyframes fadeOutError{0%{opacity:1}50%{opacity:1}to{opacity:0}}"]}),e}(),f=function(e){return{active:e}},v=function(){function e(e,t){this.scannerService=e,this.cd=t,this.ngUnsubscribe=new c.Subject}return e.prototype.ngOnInit=function(){var e=this;this.scannerService.page.pipe(Object(a.takeUntil)(this.ngUnsubscribe)).subscribe(function(){e.cd.markForCheck()})},e.prototype.ngOnDestroy=function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()},e.prototype.gotoPage=function(e){e<this.scannerService.page.value&&this.scannerService.page.next(e)},e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](l),s["\u0275\u0275directiveInject"](s.ChangeDetectorRef))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["admino-infopanel"]],decls:16,vars:9,consts:[[1,"raktar"],[1,"infoheader"],[1,"headerdata","mr-0"],[1,"num",3,"ngClass","click"],[1,"label"],[1,"headerdata","ml-0"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"div",0),s["\u0275\u0275elementStart"](1,"h3"),s["\u0275\u0275text"](2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"div",1),s["\u0275\u0275elementStart"](4,"div",2),s["\u0275\u0275elementStart"](5,"div",3),s["\u0275\u0275listener"]("click",function(){return t.gotoPage(1)}),s["\u0275\u0275elementStart"](6,"h1"),s["\u0275\u0275text"](7),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](8,"span",4),s["\u0275\u0275text"](9," utca "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](10,"div",5),s["\u0275\u0275elementStart"](11,"div",3),s["\u0275\u0275listener"]("click",function(){return t.gotoPage(2)}),s["\u0275\u0275elementStart"](12,"h1"),s["\u0275\u0275text"](13),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](14,"span",4),s["\u0275\u0275text"](15," fakk "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate1"](" ",t.scannerService.selectedUtca?t.scannerService.selectedUtca.raktar:"Utcav\xe1laszt\xe1s"," "),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngClass",s["\u0275\u0275pureFunction1"](5,f,1===t.scannerService.page.value)),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate1"](" ",t.scannerService.selectedUtca?t.scannerService.selectedUtca.utca:"-"," "),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("ngClass",s["\u0275\u0275pureFunction1"](7,f,2===t.scannerService.page.value)),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate1"](" ",null!==t.scannerService.selectedFakk&&""!==t.scannerService.selectedFakk&&void 0!==t.scannerService.selectedFakk?t.scannerService.selectedFakk:"-"," "))},directives:[r.NgClass],styles:["[_nghost-%COMP%]{width:100%;position:relative}h1[_ngcontent-%COMP%]{font-size:18px}h3[_ngcontent-%COMP%]{font-size:16px;margin-bottom:0}.raktar[_ngcontent-%COMP%]{margin-top:10px;width:100%;text-align:center}.infoheader[_ngcontent-%COMP%]{display:flex;width:100%}.infoheader[_ngcontent-%COMP%]   .headerdata[_ngcontent-%COMP%]{padding:10px;margin:0 10px 10px;flex:1;display:inline-block;text-align:center;display:flex;align-items:center;justify-items:center;flex-direction:column}.infoheader[_ngcontent-%COMP%]   .headerdata[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:-7px}.infoheader[_ngcontent-%COMP%]   .headerdata[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:12px}.infoheader[_ngcontent-%COMP%]   .headerdata[_ngcontent-%COMP%]   .num[_ngcontent-%COMP%]{background-color:rgba(var(--theme-background-700),1);border-radius:5px;padding:10px;border:3px solid transparent;width:100%;height:60px}.infoheader[_ngcontent-%COMP%]   .headerdata[_ngcontent-%COMP%]   .num.active[_ngcontent-%COMP%]{background-color:rgba(var(--theme-accent-500),.3);border-color:rgba(var(--theme-accent-500),1)!important;box-shadow:0 0 10px 0 rgba(var(--theme-accent-500),.5)!important}"]}),e}(),y=n("17wl"),b=function(){function e(e,t,n){var o=this;this.cd=e,this.scannerService=t,this.sound=n,this.ngUnsubscribe=new c.Subject,this.scannerService.next.pipe(Object(a.takeUntil)(this.ngUnsubscribe)).subscribe(function(){o.isActive()&&o.onNext()}),this.scannerService.prev.pipe(Object(a.takeUntil)(this.ngUnsubscribe)).subscribe(function(){o.isActive()&&o.onPrev()})}return e.prototype.onKeyInput=function(e){this.scannerService.logActivity(),"Enter"===e.key?(this.isActive()&&this.onNext(),e.preventDefault()):"Escape"===e.key&&(this.isActive()&&this.onPrev(),e.preventDefault()),this.keyInput(e)},e.prototype.keyInput=function(e){},e.prototype.isActive=function(){return this.scannerService.page.value===this.pageNum},e.prototype.isNumber=function(e){return isFinite(e)},e.prototype.onNext=function(){},e.prototype.onPrev=function(){this.scannerService.page.value>0&&this.scannerService.page.next(this.pageNum-1)},e.prototype.ngOnDestroy=function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()},e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](s.ChangeDetectorRef),s["\u0275\u0275directiveInject"](l),s["\u0275\u0275directiveInject"](u))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["ng-component"]],hostBindings:function(e,t){1&e&&s["\u0275\u0275listener"]("keydown",function(e){return t.onKeyInput(e)},!1,s["\u0275\u0275resolveDocument"])},inputs:{pageNum:"pageNum"},decls:0,vars:0,template:function(e,t){},encapsulation:2}),e}(),k=n("3xDq"),C=["focusRef"];function S(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-error"),s["\u0275\u0275text"](1," Hib\xe1s azonos\xedt\xf3 "),s["\u0275\u0275elementEnd"]())}function O(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-error"),s["\u0275\u0275text"](1,"Minimum 6 karakter "),s["\u0275\u0275elementEnd"]())}var x=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.formGroup=new k.FormGroup({dolgozo:new k.FormControl(null,[k.Validators.minLength(6),t.validateDolgozo.bind(t)])}),t.formSubmitted=!1,t.maxAzonositoLength=6,t}return Object(y.__extends)(t,e),t.prototype.keyInput=function(e){this.formSubmitted=!1,this.formGroup.get("dolgozo").markAsPristine(),this.formGroup.get("dolgozo").markAsUntouched()},t.prototype.ngOnInit=function(){var e=this;this.scannerService.reset(),this.focusRef.nativeElement.focus(),this.activeControl=this.formGroup.get("dolgozo"),this.scannerService.popupClosedEvent.pipe(Object(a.takeUntil)(this.ngUnsubscribe)).subscribe(function(){e.focusRef.nativeElement.focus()})},t.prototype.input=function(e){null!=e.target.value&&e.target.value.toString().length>this.maxAzonositoLength&&(e.target.value=e.target.value.toString().substring(0,this.maxAzonositoLength),this.formGroup.get("dolgozo").setValue(e.target.value)),this.formSubmitted=!1,this.formGroup.get("dolgozo").markAsPristine(),this.formGroup.get("dolgozo").markAsUntouched()},t.prototype.onNext=function(){var e=this;this.formGroup.updateValueAndValidity(),this.formGroup.markAllAsTouched();var t=this.scannerService.dolgozok.find(function(t){return null!==e.formGroup.get("dolgozo").value&&t.id===e.formGroup.get("dolgozo").value.toString()});this.formSubmitted=!0,t&&(this.scannerService.dolgozo=t,this.scannerService.addBeolvasas({type:"dolgozoBe"})&&this.scannerService.page.next(1))},t.prototype.validateDolgozo=function(e){return this.scannerService.dolgozok.find(function(t){return null!==e.value&&t.id===e.value.toString()})?null:{validDolgozo:!0}},t.\u0275fac=function(e){return _(e||t)},t.\u0275cmp=s["\u0275\u0275defineComponent"]({type:t,selectors:[["admino-loginview"]],viewQuery:function(e,t){var n;1&e&&s["\u0275\u0275staticViewQuery"](C,!0,s.ElementRef),2&e&&s["\u0275\u0275queryRefresh"](n=s["\u0275\u0275loadQuery"]())&&(t.focusRef=n.first)},features:[s["\u0275\u0275InheritDefinitionFeature"]],decls:10,vars:5,consts:[[1,"login"],["novalidate","",3,"formGroup"],["form",""],["appearance","outline","color","accent"],["matInput","","formControlName","dolgozo",3,"type","readonly","input"],["focusRef",""],[4,"ngIf"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"div",0),s["\u0275\u0275elementStart"](1,"form",1,2),s["\u0275\u0275elementStart"](3,"mat-form-field",3),s["\u0275\u0275elementStart"](4,"mat-label"),s["\u0275\u0275text"](5,"Dolgoz\xf3 k\xf3d"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"input",4,5),s["\u0275\u0275listener"]("input",function(e){return t.input(e)}),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](8,S,2,0,"mat-error",6),s["\u0275\u0275template"](9,O,2,0,"mat-error",6),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("formGroup",t.formGroup),s["\u0275\u0275advance"](5),s["\u0275\u0275property"]("type","number")("readonly",t.scannerService.keyboardMode),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",t.formGroup.get("dolgozo").hasError("validDolgozo")&&t.formSubmitted&&!t.formGroup.get("dolgozo").hasError("minlength")),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.formGroup.get("dolgozo").hasError("minlength")))},directives:[k["\u0275angular_packages_forms_forms_y"],k.NgControlStatusGroup,k.FormGroupDirective,o.MatFormField,o.MatLabel,o.MatInput,k.DefaultValueAccessor,k.NgControlStatus,k.FormControlName,r.NgIf,o.MatError],styles:["[_nghost-%COMP%]{margin-bottom:50px;position:relative;padding-left:15px;padding-right:15px;display:inline-block;width:100%}.logo[_ngcontent-%COMP%]{width:100px;margin-bottom:70px}button[_ngcontent-%COMP%]{margin-top:15px;font-size:20px;padding-bottom:15px;padding-top:15px}.login[_ngcontent-%COMP%]{width:100%;text-align:center}.login[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:30px}"]}),t}(b),_=s["\u0275\u0275getInheritedFactory"](x),M={columns:[{rows:[{keys:[{character:7},{character:8},{character:9}]},{keys:[{character:4},{character:5},{character:6}]},{keys:[{character:1},{character:2},{character:3}]},{keys:[{character:0}]}]}]},w=function(e){return{manualclick:e}},P=function(){function e(e){this.cd=e,this.clickEvent=new s.EventEmitter,this._manualClick=!1,this.fontSize="1rem"}return e.prototype.ngOnInit=function(){this.fontSize=this.config.labelSize?this.config.labelSize+"rem":"1rem"},e.prototype.manualClick=function(){var e=this;this._manualClick=!0,this.cd.markForCheck(),this.timeoutHelper=setTimeout(function(t){e._manualClick=!1,e.cd.detectChanges()},10)},e.prototype.clicked=function(){this.clickEvent.emit(this.config)},e.prototype.ngOnDestroy=function(){this.timeoutHelper&&clearTimeout(this.timeoutHelper)},e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](s.ChangeDetectorRef))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["app-keybutton"]],hostVars:2,hostBindings:function(e,t){2&e&&s["\u0275\u0275styleProp"]("font-size",t.fontSize)},inputs:{config:"config"},outputs:{clickEvent:"clickEvent"},decls:3,vars:5,consts:[[1,"key",3,"ngClass","click"],[1,"label"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"button",0),s["\u0275\u0275listener"]("click",function(){return t.clicked()}),s["\u0275\u0275elementStart"](1,"div",1),s["\u0275\u0275text"](2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275property"]("ngClass",s["\u0275\u0275pureFunction1"](3,w,t._manualClick)),s["\u0275\u0275attribute"]("disabled",t.config.disabled?"":null),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate1"](" ",t.config.label?t.config.label:t.config.character," "))},directives:[r.NgClass],styles:['[_nghost-%COMP%]{font-size:1rem}.key[_ngcontent-%COMP%]{border-radius:5px;background:rgba(var(--theme-accent-500),1);border-color:rgba(var(--theme-accent-300),1);color:rgba(var(--theme-foreground-500),1);font-size:2em;font-weight:500;transform-origin:50% 50%;border-style:solid;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:100%;height:100%;max-height:100%;transition:transform 1s ease-out,box-shadow 1s ease-out,background-color 1s ease-out;position:relative;text-align:center;min-height:0}.key[_ngcontent-%COMP%], .key[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{-webkit-backface-visibility:hidden;backface-visibility:hidden;-webkit-font-smoothing:subpixel-antialiased}.key[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{left:50%;top:50%;z-index:10;transform:translateX(-50%) translateY(-50%) translateZ(0)}.key[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], .key[_ngcontent-%COMP%]:after{position:absolute;transition:opacity 1s ease-out}.key[_ngcontent-%COMP%]:after{width:100%;height:100%;content:"";top:0;left:0;opacity:0}.key[_ngcontent-%COMP%]:disabled{opacity:.2;pointer-events:none}.key.manualclick[_ngcontent-%COMP%], .key[_ngcontent-%COMP%]:active{transform:scale(.95) translateZ(0);transition:none}.key.manualclick[_ngcontent-%COMP%]:after, .key[_ngcontent-%COMP%]:active:after{opacity:1;transition:none}.key.manualclick[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], .key[_ngcontent-%COMP%]:active   .label[_ngcontent-%COMP%]{opacity:.7}']}),e}(),I=function(e){return{flex:e}};function E(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",6),s["\u0275\u0275elementStart"](1,"app-keybutton",7),s["\u0275\u0275listener"]("clickEvent",function(e){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"](3).keyClicked(e)}),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit;s["\u0275\u0275property"]("ngStyle",s["\u0275\u0275pureFunction1"](2,I,o.width?o.width:"")),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("config",o)}}function N(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",4),s["\u0275\u0275template"](1,E,2,4,"div",5),s["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngForOf",n.keys)}}function z(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",2),s["\u0275\u0275template"](1,N,2,1,"div",3),s["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngForOf",n.rows)}}var F=function(e){return{closed:e}},j=function(){function e(){this.layout=M,this.opened=!0,this.keyEvent=new s.EventEmitter}return e.prototype.ngOnInit=function(){this.processedLayout=Object(i.cloneDeep)(this.layout),this.updateAvailable()},e.prototype.keyClicked=function(e){this.keyEvent.next(e)},e.prototype.updateAvailable=function(){for(var e=0,t=this.processedLayout.columns;e<t.length;e++)for(var n=0,o=t[e].rows;n<o.length;n++)for(var r=0,i=o[n].keys;r<i.length;r++){var a=i[r];this.availableCharacters&&(a.disabled=!(this.availableCharacters.indexOf(a.character)>-1))}},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["virtual-keyboard"]],inputs:{layout:"layout",availableCharacters:"availableCharacters"},outputs:{keyEvent:"keyEvent"},decls:2,vars:4,consts:[[1,"admino-keyboard",3,"ngClass"],["class","keycolumn",4,"ngFor","ngForOf"],[1,"keycolumn"],["class","keyrow",4,"ngFor","ngForOf"],[1,"keyrow"],["class","keybutton",3,"ngStyle",4,"ngFor","ngForOf"],[1,"keybutton",3,"ngStyle"],[3,"config","clickEvent"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"div",0),s["\u0275\u0275template"](1,z,2,1,"div",1),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275property"]("ngClass",s["\u0275\u0275pureFunction1"](2,F,!t.opened)),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngForOf",t.processedLayout.columns))},directives:[r.NgClass,r.NgForOf,r.NgStyle,P],styles:[".admino-keyboard[_ngcontent-%COMP%]{display:flex;height:100%;width:100%;min-width:0;min-height:0;transition:height 1s ease-in-out}.admino-keyboard.closed[_ngcontent-%COMP%]{height:0%}.keycolumn[_ngcontent-%COMP%]{flex-direction:column;flex:1 1 auto}.keycolumn[_ngcontent-%COMP%], .keycolumn[_ngcontent-%COMP%]   .keyrow[_ngcontent-%COMP%]{display:flex;min-width:0;min-height:0}.keycolumn[_ngcontent-%COMP%]   .keyrow[_ngcontent-%COMP%]{overflow:hidden;flex:1}.keycolumn[_ngcontent-%COMP%]   .keyrow[_ngcontent-%COMP%]   .keybutton[_ngcontent-%COMP%]{flex:1;min-width:0;min-height:0;padding:.2rem}"]}),e}(),R=["keyboardRef"],D=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.control=new k.FormControl(null,t.validateUtca.bind(t)),t.layout1=M,t.availableCharacters=null,t}return Object(y.__extends)(t,e),t.prototype.ngOnInit=function(){this.scannerService.selectedUtca&&(this.utcaExist(this.scannerService.selectedUtca.utca)?this.control.setValue(this.scannerService.selectedUtca.utca.toString()):(this.control.setValue(null),this.scannerService.selectedUtca=null))},t.prototype.keyInput=function(e){this.keyEvent(e.key)},t.prototype.keyEvent=function(e){this.scannerService.logActivity();var t=null!==this.control.value?this.control.value.toString():"";"Backspace"===e?null!==t&&t.toString().length>0&&this.control.setValue(t.toString().slice(0,t.toString().length-1)):this.isNumber(e)&&this.control.setValue(null!==t&&t.length<3?t+e:e),this.onUtcaChanged()},t.prototype.ngAfterViewInit=function(){this.onUtcaChanged()},t.prototype.onUtcaChanged=function(){var e=this.utcaExist(this.control.value);e?this.scannerService.selectedUtca=e:(this.control.setValue(null),this.scannerService.selectedUtca=null),this.availableCharacters=this.getAvailableCharaters(),this.keyboardRef.availableCharacters=this.availableCharacters,this.keyboardRef.updateAvailable(),this.scannerService.selectedFakk=null},t.prototype.getAvailableCharaters=function(){var e=this,t=null!=this.control.value?this.control.value.length:0,n=[];return this.scannerService.utcak.filter(function(t){return null==e.control.value||t.utca.toString().startsWith(e.control.value.toString())}).forEach(function(e){if(void 0!==e.utca){var o=e.utca.toString()[t];if(void 0!==o){var r=parseInt(o,10);n.indexOf(r)<0&&n.push(r)}}}),n},t.prototype.utcaExist=function(e){return null!=e&&this.scannerService.utcak&&this.scannerService.utcak.find(function(t){return null!=t.utca&&t.utca.toString()===e.toString()})},t.prototype.onNext=function(){this.control.valid?(this.onUtcaChanged(),this.scannerService.page.next(2)):this.control.markAsTouched()},t.prototype.onPrev=function(){this.scannerService.reset(),this.scannerService.page.next(0)},t.prototype._filter=function(e){if(null==e)return[];var t=e;return this.scannerService.utcak.filter(function(e){return e.utca.toString().includes(t.toString())})},t.prototype.validateUtca=function(e){return this.utcaExist(e.value)?null:{validUtca:!0}},t.\u0275fac=function(e){return T(e||t)},t.\u0275cmp=s["\u0275\u0275defineComponent"]({type:t,selectors:[["admino-utcaview"]],viewQuery:function(e,t){var n;1&e&&s["\u0275\u0275staticViewQuery"](R,!0,j),2&e&&s["\u0275\u0275queryRefresh"](n=s["\u0275\u0275loadQuery"]())&&(t.keyboardRef=n.first)},features:[s["\u0275\u0275InheritDefinitionFeature"]],decls:2,vars:2,consts:[[3,"layout","availableCharacters","keyEvent"],["keyboardRef",""]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"virtual-keyboard",0,1),s["\u0275\u0275listener"]("keyEvent",function(e){return t.keyEvent(e.character)}),s["\u0275\u0275elementEnd"]()),2&e&&s["\u0275\u0275property"]("layout",t.layout1)("availableCharacters",t.availableCharacters)},directives:[j],styles:["[_nghost-%COMP%]{position:relative;padding-left:15px;padding-right:15px;padding-bottom:15px;display:inline-block;width:100%;height:100%}"]}),t}(b),T=s["\u0275\u0275getInheritedFactory"](D),U=["triggerFakk"],A=["keyboardRef"],V=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.control=new k.FormControl(null,t.validateFakk.bind(t)),t.fakkok=[],t.layout1=M,t}return Object(y.__extends)(t,e),t.prototype.ngOnInit=function(){this.updateFakk()},t.prototype.keyInput=function(e){this.keyEvent(e.key)},t.prototype.keyEvent=function(e){var t=null!==this.control.value?this.control.value:"";this.isNumber(e)&&this.fakkExists(e)&&this.control.setValue(t.length<1?t+e:e),this.scannerService.selectedFakk=this.control.value},t.prototype.ngAfterViewInit=function(){var e=this;setTimeout(function(t){e.control.markAsUntouched(),e.control.markAsPristine()},10)},t.prototype.updateFakk=function(){var e=this,t=this.scannerService.utcak.find(function(t){return t.utca===e.scannerService.selectedUtca.utca});t?(0===t.fakkok?(this.fakkok=Array.from(Array(1).keys()),console.log(this.fakkok)):(this.fakkok=Array.from(Array(t.fakkok+1).keys()),this.fakkok.shift()),this.scannerService.selectedUtca=t,setTimeout(function(e){})):this.fakkok=[],this.cd.detectChanges(),this.keyboardRef.updateAvailable()},t.prototype.onFakkChanged=function(){this.scannerService.selectedFakk=this.control.value},t.prototype.validateFakk=function(e){return this.fakkExists(e.value)?null:{validFakk:!0}},t.prototype.fakkExists=function(e){return null!=e&&null!=(this.fakkok&&this.fakkok.find(function(t){return t.toString()===e.toString()}))},t.prototype.onNext=function(){this.control.valid?this.scannerService.page.next(3):this.control.markAsTouched()},t.\u0275fac=function(e){return B(e||t)},t.\u0275cmp=s["\u0275\u0275defineComponent"]({type:t,selectors:[["admino-fakkview"]],viewQuery:function(e,t){if(1&e&&(s["\u0275\u0275staticViewQuery"](U,!0,o.MatAutocompleteTrigger),s["\u0275\u0275staticViewQuery"](A,!0,j)),2&e){var n=void 0;s["\u0275\u0275queryRefresh"](n=s["\u0275\u0275loadQuery"]())&&(t.triggerFakkRef=n.first),s["\u0275\u0275queryRefresh"](n=s["\u0275\u0275loadQuery"]())&&(t.keyboardRef=n.first)}},features:[s["\u0275\u0275InheritDefinitionFeature"]],decls:2,vars:2,consts:[[3,"layout","availableCharacters","keyEvent"],["keyboardRef",""]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"virtual-keyboard",0,1),s["\u0275\u0275listener"]("keyEvent",function(e){return t.keyEvent(e.character)}),s["\u0275\u0275elementEnd"]()),2&e&&s["\u0275\u0275property"]("layout",t.layout1)("availableCharacters",t.fakkok)},directives:[j],styles:["[_nghost-%COMP%]{position:relative;padding-left:15px;padding-right:15px;padding-bottom:15px;display:inline-block;width:100%;height:100%}"]}),t}(b),B=s["\u0275\u0275getInheritedFactory"](V),J=n("9gj6"),L=Object(J.trigger)("codeAnimation",[Object(J.transition)("void => *",[Object(J.style)({transform:"scale(1.2)",opacity:0,height:0}),Object(J.group)([Object(J.animate)("1.4s",Object(J.style)({opacity:1,height:"*"})),Object(J.animate)("0.2s ease-out",Object(J.style)({transform:"scale(1)"}))])])]),q=n("7zYK"),G=["virtualScrollRef"];function Y(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"div",6),s["\u0275\u0275text"](1," Kezdje meg a beolvas\xe1st "),s["\u0275\u0275elementEnd"]())}function $(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"div"),s["\u0275\u0275elementStart"](1,"mat-icon",17),s["\u0275\u0275text"](2,"delete_outline "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]())}function Q(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-icon"),s["\u0275\u0275text"](1,"pan_tool "),s["\u0275\u0275elementEnd"]())}function K(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-icon"),s["\u0275\u0275text"](1,"wifi_tethering "),s["\u0275\u0275elementEnd"]())}function H(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div"),s["\u0275\u0275template"](1,Q,2,0,"mat-icon",18),s["\u0275\u0275template"](2,K,2,0,"mat-icon",18),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275nextContext"]().$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",n.manualis),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",!n.manualis)}}function X(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"div"),s["\u0275\u0275elementStart"](1,"mat-icon",19),s["\u0275\u0275text"](2,"accessibility_new "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]())}function W(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",20),s["\u0275\u0275elementStart"](1,"h2"),s["\u0275\u0275text"](2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"p",21),s["\u0275\u0275elementStart"](4,"span",22),s["\u0275\u0275text"](5),s["\u0275\u0275elementStart"](6,"span",23),s["\u0275\u0275text"](7,"utca"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](8,"span",24),s["\u0275\u0275text"](9),s["\u0275\u0275elementStart"](10,"span",23),s["\u0275\u0275text"](11,"fakk"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](12,"span",25),s["\u0275\u0275text"](13),s["\u0275\u0275pipe"](14,"date"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](15,"p",26),s["\u0275\u0275elementStart"](16,"span",27),s["\u0275\u0275text"](17),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](18,"span",28),s["\u0275\u0275text"](19),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275nextContext"]().$implicit,o=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](n.bala),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate1"]("","sztorno"===n.type?n.eredetiBeolvasas.utca:n.utca," "),s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate1"](" ","sztorno"===n.type?n.eredetiBeolvasas.fakk:n.fakk," "),s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind2"](14,6,n.datum,o.getDateFormat(n.datum))," "),s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate1"](" ",n.dolgozoNev," "),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate1"](" #",n.id,"")}}function Z(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",20),s["\u0275\u0275elementStart"](1,"h2"),s["\u0275\u0275text"](2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"p",21),s["\u0275\u0275elementStart"](4,"span",29),s["\u0275\u0275text"](5),s["\u0275\u0275pipe"](6,"date"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](7,"p",26),s["\u0275\u0275elementStart"](8,"span",27),s["\u0275\u0275text"](9),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](10,"span",28),s["\u0275\u0275text"](11),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275nextContext"]().$implicit,o=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](n.dolgozoNev),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind2"](6,4,n.datum,o.getDateFormat(n.datum))," "),s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate1"](" ",n.dolgozoNev,""),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate1"](" #",n.id,"")}}function ee(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-icon",30),s["\u0275\u0275text"](1,"sync_problem "),s["\u0275\u0275elementEnd"]())}function te(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-icon",31),s["\u0275\u0275text"](1,"check "),s["\u0275\u0275elementEnd"]())}function ne(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"button",32),s["\u0275\u0275listener"]("click",function(){s["\u0275\u0275restoreView"](n);var e=s["\u0275\u0275nextContext"]().$implicit;return s["\u0275\u0275nextContext"]().showConfirmationId=e.id}),s["\u0275\u0275elementStart"](1,"mat-icon"),s["\u0275\u0275text"](2,"delete"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}}function oe(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",33),s["\u0275\u0275text"](1," Biztosan sztorn\xf3zza? "),s["\u0275\u0275element"](2,"div",34),s["\u0275\u0275elementStart"](3,"button",35),s["\u0275\u0275listener"]("click",function(){s["\u0275\u0275restoreView"](n);var e=s["\u0275\u0275nextContext"]().$implicit;return s["\u0275\u0275nextContext"]().stornoCode(e)}),s["\u0275\u0275text"](4," Igen "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"button",36),s["\u0275\u0275listener"]("click",function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"](2).showConfirmationId=-1}),s["\u0275\u0275text"](6,"Nem"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}}var re=function(e,t,n,o){return{selected:e,animate:t,synced:n,dolgozoBe:o}};function ie(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",7),s["\u0275\u0275listener"]("click",function(){s["\u0275\u0275restoreView"](n);var e=t.$implicit;return s["\u0275\u0275nextContext"]().codeClicked(e.id)}),s["\u0275\u0275element"](1,"div",8),s["\u0275\u0275elementStart"](2,"div",9),s["\u0275\u0275template"](3,$,3,0,"div",10),s["\u0275\u0275template"](4,H,3,2,"div",10),s["\u0275\u0275template"](5,X,3,0,"div",10),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](6,"div"),s["\u0275\u0275elementStart"](7,"div",11),s["\u0275\u0275template"](8,W,20,9,"div",12),s["\u0275\u0275template"](9,Z,12,7,"div",12),s["\u0275\u0275template"](10,ee,2,0,"mat-icon",13),s["\u0275\u0275template"](11,te,2,0,"mat-icon",14),s["\u0275\u0275template"](12,ne,3,0,"button",15),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](13,oe,7,0,"div",16),s["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,r=s["\u0275\u0275nextContext"]();s["\u0275\u0275property"]("ngClass",s["\u0275\u0275pureFunction4"](11,re,o.id===r.selectedId,r.animated.indexOf(o.id)>-1,o.id<=r.scannerService.syncedTill,"dolgozoBe"===o.type)),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngSwitch",o.type),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngSwitchCase","sztorno"),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngSwitchCase","bala"),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngSwitchCase","dolgozoBe"),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngIf","bala"===o.type||"sztorno"===o.type),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf","dolgozoBe"===o.type||"dolgozoKi"===o.type),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",o.id!==r.selectedId||"bala"!==o.type),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",o.id!==r.selectedId||"bala"!==o.type),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",o.id===r.selectedId&&"bala"===o.type),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",r.showConfirmationId===o.id)}}var ae=function(e){return{opacity:e}},ce=function(){function e(e,t){var n=this;this.cd=e,this.scannerService=t,this.ngUnsubscribe=new c.Subject,this.showConfirmationId=-1,this.selectedId=-1,this.currentYear=(new Date).getFullYear(),this.hiderOpacity=1,this.timeouts=[],this.animated=[],this.scannerService.newBeolvasasEvent.pipe(Object(a.takeUntil)(this.ngUnsubscribe)).subscribe(function(e){n.showConfirmationId=-1,n.selectedId=-1,n.newCode(e.id)})}return e.prototype.scrollEvt=function(){var e=this.virtualScrollRef.nativeElement.scrollTop+this.virtualScrollRef.nativeElement.offsetHeight,t=this.virtualScrollRef.nativeElement.scrollHeight;this.hiderOpacity=e>t-300?(t-e)/300:1},e.prototype.ngOnInit=function(){},e.prototype.getDateFormat=function(e){return this.currentYear!==new Date(e).getFullYear()?"yy/MM/dd H:mm:ss":"MM/dd H:mm:ss"},e.prototype.click=function(e){this.showConfirmationId=e},e.prototype.newCode=function(e){var t=this;this.virtualScrollRef.nativeElement.scrollTop=0,this.scrollEvt(),this.animated.push(e);var n=setTimeout(function(n){t.animated.splice(t.animated.indexOf(e),1),t.timeouts.splice(t.timeouts.indexOf(e),1)},1e3);this.timeouts.push(n)},e.prototype.stornoCode=function(e){this.scannerService.addBeolvasas({bala:e.bala,type:"sztorno",eredetiBeolvasas:e})},e.prototype.codeClicked=function(e){this.selectedId!==e&&(this.selectedId=e,this.showConfirmationId=-1)},e.prototype.getCodes=function(){return this.scannerService.getAllBeolvasas().slice().reverse()},e.prototype.trackByFn=function(e,t){return t.id},e.prototype.ngOnDestroy=function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete(),this.timeouts.forEach(function(e){clearTimeout(e)}),this.timeouts=[]},e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](s.ChangeDetectorRef),s["\u0275\u0275directiveInject"](l))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["admino-eventlist"]],viewQuery:function(e,t){var n;1&e&&s["\u0275\u0275staticViewQuery"](G,!0,s.ElementRef),2&e&&s["\u0275\u0275queryRefresh"](n=s["\u0275\u0275loadQuery"]())&&(t.virtualScrollRef=n.first)},decls:6,vars:6,consts:[[1,"codes-wrapper"],["class","noscan-notice w-100 text-center",4,"ngIf"],[1,"hider",3,"ngStyle"],["itemSize","80",1,"codes","pt-0",3,"scroll"],["virtualScrollRef",""],["class","listitem",3,"ngClass","click",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],[1,"noscan-notice","w-100","text-center"],[1,"listitem",3,"ngClass","click"],[1,"codebg"],[1,"event-icon",3,"ngSwitch"],[4,"ngSwitchCase"],[1,"codewrapper","pt-2","pr-2","pb-2"],["class","code",4,"ngIf"],["color","warn","class","unsyncindicator",4,"ngIf"],["color","accent","class","syncindicator",4,"ngIf"],["class","deletebtn","mat-icon-button","",3,"click",4,"ngIf"],["class","confirmation p-3 d-flex align-items-center",4,"ngIf"],["color","warn"],[4,"ngIf"],["color","accent"],[1,"code"],[1,"datap","opacity-70","mb-0"],[1,"utca"],[1,"smalltext"],[1,"fakk","ml-2"],[1,"ml-2","id"],[1,"datap","mb-0"],[1,"id","mb-0","opacity-50"],[1,"id","ml-2","opacity-50"],[1,"id","opacity-50"],["color","warn",1,"unsyncindicator"],["color","accent",1,"syncindicator"],["mat-icon-button","",1,"deletebtn",3,"click"],[1,"confirmation","p-3","d-flex","align-items-center"],[1,"flex-grow-1"],["mat-flat-button","","color","warn",3,"click"],["mat-button","",3,"click"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"div",0),s["\u0275\u0275template"](1,Y,2,0,"div",1),s["\u0275\u0275element"](2,"div",2),s["\u0275\u0275elementStart"](3,"cdk-virtual-scroll-viewport",3,4),s["\u0275\u0275listener"]("scroll",function(){return t.scrollEvt()}),s["\u0275\u0275template"](5,ie,14,16,"div",5),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.getCodes().length<1),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngStyle",s["\u0275\u0275pureFunction1"](4,ae,t.hiderOpacity)),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("cdkVirtualForOf",t.getCodes())("cdkVirtualForTrackBy",t.trackByFn))},directives:[r.NgIf,r.NgStyle,q.CdkVirtualScrollViewport,q.CdkFixedSizeVirtualScroll,q.CdkVirtualForOf,r.NgClass,r.NgSwitch,r.NgSwitchCase,o.MatIcon,o.MatButton],pipes:[r.DatePipe],styles:["[_nghost-%COMP%]{flex:1;display:flex;height:100%}.codes-wrapper[_ngcontent-%COMP%], [_nghost-%COMP%]{position:relative;width:100%}.codes-wrapper[_ngcontent-%COMP%]{border:1px solid rgba(var(--theme-foreground-500),.1);border-left:0;border-right:0;flex-grow:1;overflow:hidden}.codes-wrapper[_ngcontent-%COMP%]   .anim[_ngcontent-%COMP%]{position:absolute;left:50%;transform:translateX(-50%);z-index:1000;top:5px}.codes-wrapper[_ngcontent-%COMP%]   .noscan-notice[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;transform:translateX(-50%) translateY(-50%);font-size:1.2em;opacity:.5}.codes-wrapper[_ngcontent-%COMP%]   .hider[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;width:calc(100% - 7px);height:25%;pointer-events:none;z-index:100;background:linear-gradient(rgba(var(--theme-background-500),0),rgba(var(--theme-background-500),.9))!important}.codes-wrapper[_ngcontent-%COMP%]   .codes[_ngcontent-%COMP%]{position:relative;overflow:hidden;overflow-y:auto;height:100%}.codes-wrapper[_ngcontent-%COMP%]   .codes[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{border-radius:5px;background-color:rgba(var(--theme-accent-500),.3);border-color:rgba(var(--theme-accent-500),0)!important;box-shadow:inset 0 0 0 3px rgba(var(--theme-accent-500),1),0 0 10px 0 rgba(var(--theme-accent-500),.5)!important}.codes-wrapper[_ngcontent-%COMP%]   .codes[_ngcontent-%COMP%]   .listitem[_ngcontent-%COMP%]{position:relative;border-bottom:1px solid rgba(var(--theme-foreground-500),.1);height:80px;overflow:hidden;display:flex}.codes-wrapper[_ngcontent-%COMP%]   .codes[_ngcontent-%COMP%]   .listitem[_ngcontent-%COMP%]   .event-icon[_ngcontent-%COMP%]{margin-left:15px;width:45px;display:flex;align-items:center;justify-items:center}.codes-wrapper[_ngcontent-%COMP%]   .codes[_ngcontent-%COMP%]   .listitem[_ngcontent-%COMP%]   .event-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:30px;width:30px;height:30px}.codes-wrapper[_ngcontent-%COMP%]   .codes[_ngcontent-%COMP%]   .listitem.animate[_ngcontent-%COMP%]{-webkit-animation:heightInCode .3s ease-out 0s forwards,highlightIn 1s forwards;animation:heightInCode .3s ease-out 0s forwards,highlightIn 1s forwards}.codes-wrapper[_ngcontent-%COMP%]   .codes[_ngcontent-%COMP%]   .listitem.animate[_ngcontent-%COMP%]   .codewrapper[_ngcontent-%COMP%]{-webkit-animation:fadeInCode .5s ease-out 0s forwards;animation:fadeInCode .5s ease-out 0s forwards}.codes-wrapper[_ngcontent-%COMP%]   .codes[_ngcontent-%COMP%]   .listitem.animate[_ngcontent-%COMP%]   .codebg[_ngcontent-%COMP%]{-webkit-animation:fadeOut 1s linear 0s forwards;animation:fadeOut 1s linear 0s forwards;position:absolute;width:100%;height:100%;left:0;top:0}.codes-wrapper[_ngcontent-%COMP%]   .codes[_ngcontent-%COMP%]   .listitem[_ngcontent-%COMP%]   .codewrapper[_ngcontent-%COMP%]{display:flex;width:100%;align-items:center;flex:1}.codes-wrapper[_ngcontent-%COMP%]   .codes[_ngcontent-%COMP%]   .listitem[_ngcontent-%COMP%]   .codewrapper[_ngcontent-%COMP%]   .code[_ngcontent-%COMP%]{flex:1}.codes-wrapper[_ngcontent-%COMP%]   .codes[_ngcontent-%COMP%]   .listitem[_ngcontent-%COMP%]   .codewrapper[_ngcontent-%COMP%]   .code[_ngcontent-%COMP%]   .datap[_ngcontent-%COMP%]{line-height:18px}.codes-wrapper[_ngcontent-%COMP%]   .codes[_ngcontent-%COMP%]   .listitem[_ngcontent-%COMP%]   .codewrapper[_ngcontent-%COMP%]   .code[_ngcontent-%COMP%]   .fakk[_ngcontent-%COMP%], .codes-wrapper[_ngcontent-%COMP%]   .codes[_ngcontent-%COMP%]   .listitem[_ngcontent-%COMP%]   .codewrapper[_ngcontent-%COMP%]   .code[_ngcontent-%COMP%]   .id[_ngcontent-%COMP%], .codes-wrapper[_ngcontent-%COMP%]   .codes[_ngcontent-%COMP%]   .listitem[_ngcontent-%COMP%]   .codewrapper[_ngcontent-%COMP%]   .code[_ngcontent-%COMP%]   .smalltext[_ngcontent-%COMP%], .codes-wrapper[_ngcontent-%COMP%]   .codes[_ngcontent-%COMP%]   .listitem[_ngcontent-%COMP%]   .codewrapper[_ngcontent-%COMP%]   .code[_ngcontent-%COMP%]   .utca[_ngcontent-%COMP%]{font-size:12px}.codes-wrapper[_ngcontent-%COMP%]   .codes[_ngcontent-%COMP%]   .listitem[_ngcontent-%COMP%]   .codewrapper[_ngcontent-%COMP%]   .code[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px;margin-bottom:0}.codes-wrapper[_ngcontent-%COMP%]   .codes[_ngcontent-%COMP%]   .listitem[_ngcontent-%COMP%]   .codewrapper[_ngcontent-%COMP%]   .code[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   .manual[_ngcontent-%COMP%]{font-size:14px}.codes-wrapper[_ngcontent-%COMP%]   .codes[_ngcontent-%COMP%]   .listitem.synced[_ngcontent-%COMP%]   .unsyncindicator[_ngcontent-%COMP%], .codes-wrapper[_ngcontent-%COMP%]   .codes[_ngcontent-%COMP%]   .listitem[_ngcontent-%COMP%]   .syncindicator[_ngcontent-%COMP%]{display:none}.codes-wrapper[_ngcontent-%COMP%]   .codes[_ngcontent-%COMP%]   .listitem.synced[_ngcontent-%COMP%]   .syncindicator[_ngcontent-%COMP%]{display:inline-block}.codes-wrapper[_ngcontent-%COMP%]   .codes[_ngcontent-%COMP%]   .confirmation[_ngcontent-%COMP%]{font-size:14px;position:absolute;width:100%;height:100%;left:0;z-index:10;top:0;background-color:rgba(var(--theme-background-700),.97);border-radius:5px;border-color:rgba(var(--theme-accent-500),0)!important;box-shadow:inset 0 0 0 3px rgba(var(--theme-accent-500),1),0 0 10px 0 rgba(var(--theme-accent-500),.5)!important}@-webkit-keyframes rotate{0%{transform:rotate(-10deg)}to{transform:rotate(10deg)}}@keyframes rotate{0%{transform:rotate(-10deg)}to{transform:rotate(10deg)}}@-webkit-keyframes fadeInCode{0%{transform:scale(1.1);opacity:0}30%{transform:scale(1.1);opacity:0}to{transform:scale(1);opacity:1}}@keyframes fadeInCode{0%{transform:scale(1.1);opacity:0}30%{transform:scale(1.1);opacity:0}to{transform:scale(1);opacity:1}}@-webkit-keyframes highlightIn{0%{background-color:rgba(var(--theme-accent-500),1)}to{background-color:rgba(var(--theme-accent-500),0)}}@keyframes highlightIn{0%{background-color:rgba(var(--theme-accent-500),1)}to{background-color:rgba(var(--theme-accent-500),0)}}@-webkit-keyframes heightInCode{0%{height:0}to{height:79px}}@keyframes heightInCode{0%{height:0}to{height:79px}}@-webkit-keyframes fadeOut{0%{opacity:1}to{opacity:0}}@keyframes fadeOut{0%{opacity:1}to{opacity:0}}"]}),e}();function se(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",1),s["\u0275\u0275elementStart"](1,"h3"),s["\u0275\u0275text"](2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate1"](" ",n.currentManualRead," ")}}var le=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currentRead="",t.currentManualRead="",t.errorMessage={error:"Sikertelen beolvas\xe1s",description:"Nem megfelel\u0151 form\xe1tum"},t.testData=[],t.testDataId=0,t}return Object(y.__extends)(t,e),t.prototype.ngOnInit=function(){},t.prototype.onManualInput=function(e){if("Backspace"===e.key)this.currentManualRead=this.currentManualRead.substring(0,this.currentManualRead.length-1);else if("End"===e.key||"Minus"===e.code)e.preventDefault(),this.codeDetected(this.testData[this.testDataId],!1),this.testDataId++,this.testDataId>=this.testData.length&&(this.testDataId=0);else if("Home"===e.key)for(var t=0;t<50;t++)this.codeDetected(this.testData[this.testDataId],!1),this.testDataId++,this.testDataId>=this.testData.length&&(this.testDataId=0);else"Enter"===e.key?this.validateInput(this.currentManualRead,(new Date).getFullYear()+1)?(this.codeDetected(this.currentManualRead,!0),this.currentManualRead="",this.currentRead=""):this.currentManualRead.length>0&&(this.sound.playSound(1),this.scannerService.newErrorEvent.next(this.errorMessage)):"Escape"===e.key&&(e.preventDefault(),this.onPrev())},t.prototype.onInput=function(e){(this.isNumber(e.key)||"/"===e.key||"."===e.key)&&this.currentManualRead.length<10&&(this.currentManualRead+="."===e.key?"/":e.key),this.currentRead+=e.key,this.currentRead.endsWith("_+")&&(this.currentRead="_++"),this.currentRead.startsWith("_++")&&this.currentRead.endsWith("+_")&&this.codeDetected(this.currentRead.substring(3,this.currentRead.length-2))},t.prototype.codeDetected=function(e,t){void 0===t&&(t=!1);var n=this.validateInput(e,(new Date).getFullYear()+1);n?(this.scannerService.addBeolvasas({type:"bala",bala:n,utca:this.scannerService.selectedUtca.utca,fakk:this.scannerService.selectedFakk,manualis:t}),this.currentRead="",this.currentManualRead="",this.sound.playSound(0)):(t||(this.currentRead="",this.currentManualRead=""),this.sound.playSound(1),this.scannerService.newErrorEvent.next(this.errorMessage))},t.prototype.validateInput=function(e,t){var n,o;t%=100;var r=e.indexOf("/");if(-1!==r){if(n=e.substring(0,r),o=e.substring(r+1),n.length>7||o.length>3||0===o.length)return null}else{var a=e.length;if(8!==a&&10!==a)return null;n=e.substring(a-7,a),o=e.substring(0,a-7)}var c=/^\d+$/.test(n),s=/^\d+$/.test(o);if(c&&s){var l=parseInt("10000000"+n,10)%1e7,d=parseInt("1000"+o,10)%1e3;return 0===l||d>t?null:l+"/"+Object(i.padStart)(d.toString(),2,"0")}return null},t.\u0275fac=function(e){return de(e||t)},t.\u0275cmp=s["\u0275\u0275defineComponent"]({type:t,selectors:[["admino-inputview"]],hostBindings:function(e,t){1&e&&s["\u0275\u0275listener"]("keydown",function(e){return t.onManualInput(e)},!1,s["\u0275\u0275resolveDocument"])("keypress",function(e){return t.onInput(e)},!1,s["\u0275\u0275resolveDocument"])},inputs:{testData:"testData"},features:[s["\u0275\u0275InheritDefinitionFeature"]],decls:2,vars:1,consts:[["class","current-read",4,"ngIf"],[1,"current-read"]],template:function(e,t){1&e&&(s["\u0275\u0275element"](0,"admino-eventlist"),s["\u0275\u0275template"](1,se,3,1,"div",0)),2&e&&(s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",""!==t.currentManualRead))},directives:[ce,r.NgIf],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:center;width:100%;height:100%;max-height:100%;position:relative}[_nghost-%COMP%]   .current-read[_ngcontent-%COMP%]{position:absolute;bottom:25px;border-radius:5px;padding:15px;z-index:101;background-color:rgba(var(--theme-background-700),.8);border-color:rgba(var(--theme-background-600),.5);max-width:100%;word-wrap:break-word}[_nghost-%COMP%]   .current-read[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:0}"],data:{animation:[L]}}),t}(b),de=s["\u0275\u0275getInheritedFactory"](le);function ue(e,t){1&e&&s["\u0275\u0275element"](0,"admino-popup",17),2&e&&s["\u0275\u0275property"]("popupData",t.$implicit)}function pe(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",15),s["\u0275\u0275template"](1,ue,1,1,"admino-popup",16),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngForOf",n.scannerService.popups)}}function ge(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"button",9),s["\u0275\u0275listener"]("click",function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"](2).logout()}),s["\u0275\u0275elementStart"](1,"mat-icon"),s["\u0275\u0275text"](2,"arrow_back"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}}function he(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",8),s["\u0275\u0275template"](1,ge,3,0,"button",18),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",n.scannerService.dolgozo)}}function me(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"h6",19),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",n.scannerService.dolgozo&&n.scannerService.dolgozo.nev," ")}}function fe(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",20),s["\u0275\u0275elementStart"](1,"button",9),s["\u0275\u0275listener"]("click",function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"]().clearLocalStorage()}),s["\u0275\u0275elementStart"](2,"mat-icon"),s["\u0275\u0275text"](3,"delete_sweep"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}}function ve(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",21),s["\u0275\u0275elementStart"](1,"div",22),s["\u0275\u0275elementStart"](2,"h6"),s["\u0275\u0275text"](3),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"mat-icon",23),s["\u0275\u0275text"](5,"warning"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate1"](" ",n.scannerService.syncId-n.scannerService.syncedTill," ")}}function ye(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-icon",24),s["\u0275\u0275text"](1,"wifi"),s["\u0275\u0275elementEnd"]())}function be(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"mat-icon",23),s["\u0275\u0275text"](1,"wifi_off "),s["\u0275\u0275elementEnd"]())}function ke(e,t){1&e&&s["\u0275\u0275element"](0,"admino-infopanel")}function Ce(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"div",29),s["\u0275\u0275element"](1,"admino-loginview",30),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("pageNum",0))}function Se(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"div",29),s["\u0275\u0275element"](1,"admino-utcaview",30),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("pageNum",1))}function Oe(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"div",29),s["\u0275\u0275element"](1,"admino-fakkview",30),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("pageNum",2))}function xe(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",31),s["\u0275\u0275element"](1,"admino-inputview",32),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("pageNum",3)("testData",null==n.context.pluginConfig.config?null:n.context.pluginConfig.config.testData)}}function _e(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",25),s["\u0275\u0275template"](1,ke,1,0,"admino-infopanel",26),s["\u0275\u0275element"](2,"admino-erroroverlay"),s["\u0275\u0275template"](3,Ce,2,1,"div",27),s["\u0275\u0275template"](4,Se,2,1,"div",27),s["\u0275\u0275template"](5,Oe,2,1,"div",27),s["\u0275\u0275template"](6,xe,2,2,"div",28),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275nextContext"]();s["\u0275\u0275property"]("ngSwitch",n.scannerService.page.value),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",n.scannerService.page.value>0),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngSwitchCase",0),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngSwitchCase",1),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngSwitchCase",2),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngSwitchCase",3)}}function Me(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-icon",36),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275nextContext"]().$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",n.iconleft,"")}}function we(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-icon",37),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275nextContext"]().$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",n.iconright,"")}}function Pe(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"button",33),s["\u0275\u0275listener"]("click",function(){s["\u0275\u0275restoreView"](n);var e=t.$implicit;return s["\u0275\u0275nextContext"]().handleClick(e)}),s["\u0275\u0275template"](1,Me,2,1,"mat-icon",34),s["\u0275\u0275text"](2),s["\u0275\u0275template"](3,we,2,1,"mat-icon",35),s["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit;s["\u0275\u0275property"]("type","button")("color",o.color),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",o.iconleft),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",o.label," "),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",o.iconright)}}var Ie=function(){function e(e,t,n,o){var r=this;this.scannerService=e,this.cd=t,this.el=n,this.context=o,this.retryTime=2e3,this.maxRetryTime=5e3,this.trying=!1,this.connectionLost=!1,this.scannerService.online=window.navigator.onLine,this.scannerService.newBeolvasasEvent.pipe(Object(a.takeUntil)(this.context.destroy$)).subscribe(function(){r.context.control.setValue(r.scannerService.getUnsyncedBeolvasasok()),r.tryUpload()}),this.context.update$.pipe(Object(a.takeUntil)(this.context.destroy$)).subscribe(function(e){var t,n;if(e.compareResult.diff.config){var o=function(e,t){var n={new:{},updated:{},deleted:{},diff:{},untouched:{}};if(i.isNil(e)&&i.isNil(t))return n;if(i.isNil(t))return Object.keys(e).forEach(function(e){n.deleted[e]=!0,n.diff[e]=!0}),n;if(i.isNil(e))return Object.keys(t).forEach(function(e){n.new[e]=!0,n.diff[e]=!0}),n;for(var o=Object.keys(e).concat(Object.keys(t)),r=0;r<o.length;r++){var a=o[r];i.isEqual(e[a],t[a])?n.untouched[a]=!0:(n.diff[a]=!0,e.hasOwnProperty(a)?t.hasOwnProperty(a)?n.updated[a]=!0:n.deleted[a]=!0:n.new[a]=!0)}return n}(null===(t=e.prevConfig)||void 0===t?void 0:t.config,null===(n=e.newConfig)||void 0===n?void 0:n.config).diff,a=r.context.pluginConfig.config;o.syncedTill&&r.scannerService.setSyncedTill(a.syncedTill),o.database&&void 0!==a.database&&r.scannerService.updateConfig(a.database.version,a.database.utcak,a.database.dolgozok),o.scanner&&(r.scannerService.scanner=a.scanner)}}),this.scannerService.init(),this.scannerService.loadConfig()}return e.prototype.offline=function(e){this.scannerService.logActivity()},e.prototype.ngOnInit=function(){var e,t,n,o,r,i=this;void 0!==(null===(e=this.context.pluginConfig.config)||void 0===e?void 0:e.database)&&this.scannerService.updateConfig(null===(t=this.context.pluginConfig.config)||void 0===t?void 0:t.database.version,null===(n=this.context.pluginConfig.config)||void 0===n?void 0:n.database.utcak,null===(o=this.context.pluginConfig.config)||void 0===o?void 0:o.database.dolgozok),this.scannerService.scanner=null===(r=this.context.pluginConfig.config)||void 0===r?void 0:r.scanner,this.scannerService.getUnsyncedBeolvasasok().data.length>0&&(this.context.control.setValue(this.scannerService.getUnsyncedBeolvasasok()),this.tryUpload()),this.scannerService.page.pipe(Object(a.takeUntil)(this.context.destroy$)).subscribe(function(){i.cd.detectChanges()}),this.scannerService.dataLoaded=!0},e.prototype.tryUpload=function(e){var t=this;void 0===e&&(e=null),this.retryTimer&&clearTimeout(this.retryTimer),this.currentSub&&(this.currentSub.unsubscribe(),this.currentSub=0);var n=null!==e?e:this.scannerService.syncId;this.currentSub=this.context.firePluginInteractions("upload",{}).subscribe(function(e){t.retryTime=1e3,t.scannerService.online=!0,t.checkConnectionLost(),t.cd.markForCheck()},function(e){n===t.scannerService.syncId&&(t.retryTimer=setTimeout(function(){n===t.scannerService.syncId&&t.tryUpload(n)},t.retryTime),t.retryTime<t.maxRetryTime&&(t.retryTime+=1e3)),t.scannerService.online=!1,t.cd.markForCheck()}),this.checkConnectionLost()},e.prototype.checkConnectionLost=function(){var e=this;this.connectionLostHelperTimeout&&clearTimeout(this.connectionLostHelperTimeout),this.connectionLostHelperTimeout=setTimeout(function(){e.connectionLost=e.scannerService.syncId-e.scannerService.syncedTill>0,e.cd.markForCheck()},1e3)},e.prototype.clearLocalStorage=function(){localStorage.clear()},e.prototype.handleClick=function(e){this.scannerService.logActivity(),"next"===e.func?this.scannerService.next.next():"prev"===e.func?this.scannerService.prev.next():"doubleprev"===e.func&&(this.scannerService.prev.next(),this.scannerService.prev.next())},e.prototype.logout=function(){this.scannerService.page.next(0),this.scannerService.reset()},e.prototype.onDestroy=function(){this.scannerService.reset(),this.scannerService.destroy()},e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](l),s["\u0275\u0275directiveInject"](s.ChangeDetectorRef),s["\u0275\u0275directiveInject"](s.ElementRef),s["\u0275\u0275directiveInject"](d.PLUGIN_CONTEXT))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["app-scanner"]],hostBindings:function(e,t){1&e&&s["\u0275\u0275listener"]("mousewheel",function(){return t.offline()})("scroll",function(){return t.offline()})("keydown",function(){return t.offline()})("click",function(){return t.offline()})},features:[s["\u0275\u0275ProvidersFeature"]([l,u])],decls:15,vars:9,consts:[[1,"admino-scanner"],["class","popups",4,"ngIf"],[1,"header"],["class","toolbarbtn",4,"ngIf"],[1,"user"],["class","username mb-0 mt-1 d-inline-block",4,"ngIf"],["class","pr-1 toolbarbtn",4,"ngIf"],["class","pr-1",4,"ngIf"],[1,"toolbarbtn"],["mat-icon-button","",3,"click"],["class","color-accent",4,"ngIf"],["class","color-warn",4,"ngIf"],["class","content",3,"ngSwitch",4,"ngIf"],[1,"bottomnav"],["mat-flat-button","",3,"type","color","click",4,"ngFor","ngForOf"],[1,"popups"],[3,"popupData",4,"ngFor","ngForOf"],[3,"popupData"],["mat-icon-button","",3,"click",4,"ngIf"],[1,"username","mb-0","mt-1","d-inline-block"],[1,"pr-1","toolbarbtn"],[1,"pr-1"],[1,"unsyncronized","mr-1"],[1,"color-warn"],[1,"color-accent"],[1,"content",3,"ngSwitch"],[4,"ngIf"],["class","page",4,"ngSwitchCase"],["class","page h-100",4,"ngSwitchCase"],[1,"page"],[3,"pageNum"],[1,"page","h-100"],[3,"pageNum","testData"],["mat-flat-button","",3,"type","color","click"],["class","lefticon",4,"ngIf"],["class","righticon",4,"ngIf"],[1,"lefticon"],[1,"righticon"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"div",0),s["\u0275\u0275template"](1,pe,2,1,"div",1),s["\u0275\u0275elementStart"](2,"div",2),s["\u0275\u0275template"](3,he,2,1,"div",3),s["\u0275\u0275elementStart"](4,"div",4),s["\u0275\u0275template"](5,me,2,1,"h6",5),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](6,fe,4,0,"div",6),s["\u0275\u0275template"](7,ve,6,1,"div",7),s["\u0275\u0275elementStart"](8,"div",8),s["\u0275\u0275elementStart"](9,"button",9),s["\u0275\u0275listener"]("click",function(){return t.tryUpload()}),s["\u0275\u0275template"](10,ye,2,0,"mat-icon",10),s["\u0275\u0275template"](11,be,2,0,"mat-icon",11),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](12,_e,7,6,"div",12),s["\u0275\u0275elementStart"](13,"div",13),s["\u0275\u0275template"](14,Pe,4,5,"button",14),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.scannerService.popups.length>0),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",t.scannerService.dolgozo),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",t.scannerService.dolgozo),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",!t.connectionLost),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.connectionLost),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngIf",t.scannerService.online),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",!t.scannerService.online),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.scannerService.dataLoaded),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngForOf",t.scannerService.labels[t.scannerService.page.value]))},directives:[r.NgIf,o.MatButton,r.NgForOf,g,o.MatIcon,r.NgSwitch,m,r.NgSwitchCase,v,x,D,V,le],styles:[".admino-scanner[_ngcontent-%COMP%], [_nghost-%COMP%]{height:100%;width:100%;position:relative}.admino-scanner[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column}.admino-scanner[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:1rem;margin:0}.admino-scanner[_ngcontent-%COMP%]   .popups[_ngcontent-%COMP%]{z-index:10;position:fixed;height:100%;width:100%;pointer-events:all;background-color:rgba(0,0,0,.5);display:flex;flex-direction:column}.admino-scanner[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{width:100%;padding:15px 15px 0 0;border-bottom:1px solid rgba(var(--theme-foreground-500),.1);position:relative;display:flex}.admino-scanner[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .toolbarbtn[_ngcontent-%COMP%]{margin-top:-8px}.admino-scanner[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{flex:1;position:relative;overflow:hidden}.admino-scanner[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{transform:translateY(-2px);overflow:hidden;white-space:nowrap;position:relative}.admino-scanner[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{transform:translateY(2px)}.admino-scanner[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .unsyncronized[_ngcontent-%COMP%]{transform:translateY(-5px);display:inline-block}.admino-scanner[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .unsyncronized[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin-bottom:0}.admino-scanner[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{justify-content:center;flex-direction:column;position:relative;overflow:hidden}.admino-scanner[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%], .admino-scanner[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .page[_ngcontent-%COMP%]{display:flex;align-items:center;flex:1;width:100%}.admino-scanner[_ngcontent-%COMP%]   .bottomnav[_ngcontent-%COMP%]{width:100%;display:flex;border-top:1px solid rgba(var(--theme-foreground-500),.3)}.admino-scanner[_ngcontent-%COMP%]   .bottomnav[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{transform:translateY(-1px)}.admino-scanner[_ngcontent-%COMP%]   .bottomnav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:0;flex-grow:1;padding-top:5px;padding-bottom:5px}[_nghost-%COMP%]     input:-webkit-autofill{-webkit-animation-delay:1s;-webkit-animation-name:autofill;-webkit-animation-fill-mode:both}[_nghost-%COMP%]     input::-webkit-inner-spin-button, [_nghost-%COMP%]     input::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}[_nghost-%COMP%]     input:focus{outline:none}[_nghost-%COMP%]     input[type=number]{-moz-appearance:textfield}[_nghost-%COMP%]     mat-form-field{width:100%}@-webkit-keyframes autofill{0%,to{color:#666;background:transparent}}"]}),e}(),Ee=function(){function e(){}return e.entry=null,e.\u0275mod=s["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=s["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.CommonModule]]}),e}(),Ne=function(){function e(){}return e.entry=Ie,e.\u0275mod=s["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=s["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.CommonModule,k.ReactiveFormsModule,o.MatIconModule,o.MatButtonModule,o.MatFormFieldModule,o.MatInputModule,q.ScrollingModule,Ee]]}),e}();t.default=Ne},Vgaj:function(e,t){e.exports=a},YLtl:function(e,t){e.exports=c},aP7H:function(e,t){e.exports=s},cfyg:function(e,t){e.exports=l},vOrQ:function(e,t){e.exports=d}})});