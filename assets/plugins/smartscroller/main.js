!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("adm.@angular/common"),require("adm.rxjs/operators"),require("adm.shared"),require("adm.@angular/core")):"function"==typeof define&&define.amd?define(["adm.@angular/common","adm.rxjs/operators","adm.shared","adm.@angular/core"],e):"object"==typeof exports?exports.smartscroller=e(require("adm.@angular/common"),require("adm.rxjs/operators"),require("adm.shared"),require("adm.@angular/core")):t.smartscroller=e(t["adm.@angular/common"],t["adm.rxjs/operators"],t["adm.shared"],t["adm.@angular/core"])}("undefined"!=typeof self?self:this,function(t,e,n,o){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,(function(e){return t[e]}).bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/assets/plugins/smartscroller",n(n.s=0)}({0:function(t,e,n){t.exports=n("P+m1")},"0S4P":function(e,n){e.exports=t},"P+m1":function(t,e,n){"use strict";n.r(e),n.d(e,"SmartscrollerModule",function(){return m});var o=n("vOrQ"),r=n("cfyg"),i=n("aP7H"),a=n("0S4P"),s=["canvasRef"];function c(t,e){if(1&t&&(o["\u0275\u0275elementStart"](0,"div",8),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&t){var n=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](n.currentStartY.toFixed(1))}}function l(t,e){if(1&t&&(o["\u0275\u0275elementStart"](0,"div",9),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&t){var n=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](n.currentEndY.toFixed(1))}}function u(t,e){if(1&t&&(o["\u0275\u0275elementStart"](0,"div",5),o["\u0275\u0275template"](1,c,2,1,"div",6),o["\u0275\u0275template"](2,l,2,1,"div",7),o["\u0275\u0275elementEnd"]()),2&t){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",void 0!==n.currentStartY),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",void 0!==n.currentEndY)}}function d(t,e){if(1&t&&(o["\u0275\u0275elementStart"](0,"div",8),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&t){var n=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](n.currentStartX.toFixed(1))}}function h(t,e){if(1&t&&(o["\u0275\u0275elementStart"](0,"div",9),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&t){var n=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](n.currentEndX.toFixed(1))}}function p(t,e){if(1&t&&(o["\u0275\u0275elementStart"](0,"div",10),o["\u0275\u0275template"](1,d,2,1,"div",6),o["\u0275\u0275template"](2,h,2,1,"div",7),o["\u0275\u0275elementEnd"]()),2&t){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",void 0!==n.currentStartX),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",void 0!==n.currentEndX)}}var f=function(t,e,n){return{dragging:t,vertical:e,both:n}},g=function(){function t(t,e){this.context=t,this.el=e,this.minX=0,this.maxX=1,this.minY=0,this.maxY=1,this.orientation="horizontal",this.zoomX=1,this.zoomY=1,this.pos={x:0,y:0},this.posStart={x:0,y:0},this.dragPos={x:0,y:0,deltaX:0,deltaY:0},this.isDragging=!1,this.axisXInfo={},this.axisYInfo={},this.prevPinchScale=0,this.pinchcenter=0,this.lastScale=0}return t.prototype.pinchEnd=function(){this.lastScale=0,this.pinchcenter=0},t.prototype.pinchStart=function(t){},t.prototype.onWheel=function(t){var e=this,n=this.el.nativeElement.getBoundingClientRect();!function(o,r,i,a,s,c){var l,u=(e.getPosFromEvent(t).x-n.left)/s,d=r+(i-r)*u;l="pinchmove"===t.type?t.scale:t.deltaY<0?1.2:100/120;var h=e["zoom"+"x".toUpperCase()]*l;e["zoom"+"x".toUpperCase()]=h<1?1:h>a?a:h;var p=a/e["zoom"+"x".toUpperCase()],f=d-p*u,g=f+p;e.pos.x=s/p*-(f<0?0:g>a?f-g+a:f)}(0,this.currentStartX,this.currentEndX,this.maxX,this.el.nativeElement.offsetWidth),this.redraw(),this.updateValue()},t.prototype.dragStart=function(t){var e=this.getPosFromEvent(t);this.dragPos.x=e.x,this.dragPos.y=e.y,Object.assign(this.posStart,this.pos),this.isDragging=!0},t.prototype.drag=function(t){if(this.isDragging){var e=this.getPosFromEvent(t);this.dragPos.deltaX=e.x-this.dragPos.x,this.dragPos.deltaY=e.y-this.dragPos.y,this.pos.x=this.posStart.x+this.dragPos.deltaX,this.pos.y=this.posStart.y+this.dragPos.deltaY,this.redraw(),this.updateValue()}},t.prototype.dragEnd=function(t){this.isDragging=!1},t.prototype.click=function(t){this.isDragging=!1},t.prototype.getPosFromEvent=function(t){var e,n;if("touchstart"==t.type||"touchmove"==t.type||"touchend"==t.type||"touchcancel"==t.type){var o=t.touches[0]||t.changedTouches[0];e=o.pageX,n=o.pageY}else"pinch"==t.type||"pinchmove"==t.type?(e=t.center.x,n=t.center.y):(e=t.clientX,n=t.clientY);return{x:e,y:n}},t.prototype.ngOnInit=function(){var t=this;this.updateComputedStyles(),this.context.update$.pipe(Object(i.takeUntil)(this.context.destroy$)).subscribe(function(e){t.updateComputedStyles()}),this.context.contentSizeChanged$.pipe(Object(i.takeUntil)(this.context.destroy$)).subscribe(function(e){t.redraw()}),this.init()},t.prototype.updateComputedStyles=function(){this.style=window.getComputedStyle(this.el.nativeElement)},t.prototype.ngAfterViewInit=function(){var t=this;this.timeoutHelper=setTimeout(function(){t.updateComputedStyles(),t.redraw()})},t.prototype.init=function(){var t,e,n,o,r,i;this.minX=null===(t=this.context.pluginConfig)||void 0===t?void 0:t.config.minX,this.maxX=null===(e=this.context.pluginConfig)||void 0===e?void 0:e.config.maxX,this.minY=null===(n=this.context.pluginConfig)||void 0===n?void 0:n.config.minY,this.maxY=null===(o=this.context.pluginConfig)||void 0===o?void 0:o.config.maxY,(null===(r=this.context.pluginConfig)||void 0===r?void 0:r.config.orientation)&&(this.orientation=null===(i=this.context.pluginConfig)||void 0===i?void 0:i.config.orientation)},t.prototype.updateValue=function(){this.context.control.setValue({startX:this.currentStartX,endX:this.currentEndX,startY:this.currentStartY,endY:this.currentEndY})},t.prototype.redraw=function(){var t=this,e=this.canvasRef.nativeElement.getContext("2d"),n=this.el.nativeElement.offsetWidth,o=this.el.nativeElement.offsetHeight;this.canvasRef.nativeElement.width=n,this.canvasRef.nativeElement.height=o,e.clearRect(0,0,n,o);var r=function(r,i,a,s,c,l){for(var u=(a-i)/l,d=Math.floor(s/50),h=1,p=1;!(u/(p*h)<=d);)5===p?(p=1,h*=10):p=2===p?5:2;var f=p*h,g=u/(p*h),m=Math.ceil(g),v=s/g;t.pos[r]=c=c>0?0:c;var x=g*l*v-s;t.pos[r]=c=c<-x?-x:c;var y=-c/s*u+i,C=-(c-s)/s*u+i;t["currentStart"+r.toUpperCase()]=y,t["currentEnd"+r.toUpperCase()]=C,e.beginPath(),e.fillStyle="rgba("+t.style.getPropertyValue("--theme-background-800")+",0.2)";var P=(y-i)/a*s,O=C/a*s;"x"===r?e.rect(P,0,O-P,o):e.rect(0,P,n,O-P),e.fill();for(var M=0;M<m;M++){var S=c+M*v,b=Math.ceil(-S/(m*v)),_=M*f+b*m*f;S<-Math.ceil(m*v)%s&&(S+=m*v*b),e.beginPath(),e.fillStyle="rgba("+t.style.getPropertyValue("--theme-foreground-300")+",0.2)","x"===r?e.rect(S,0,1,o):e.rect(0,S,n,1),e.fill(),e.font="10px "+t.style.fontFamily,e.fillStyle=t.style.color,e.textAlign="center",e.textBaseline="middle",_%5==0&&("x"===r?e.fillText(_.toFixed(1),S,o/2):e.fillText(_.toFixed(1),n/2-5,S+5))}return{axis:r,optimalNumOfDashes:d,numberOfDashes:m,stepSize:f,num:u,downscaledNum:g,space:v,start:y,end:C,zoom:l}};"horizontal"===this.orientation?this.axisXInfo=r("x",this.minX,this.maxX,n,this.pos.x,this.zoomX):("vertical"===this.orientation||(this.axisXInfo=r("x",this.minX,this.maxX,n,this.pos.x,this.zoomX)),this.axisYInfo=r("y",this.minY,this.maxY,o,this.pos.y,this.zoomY))},t.prototype.ngOnDestroy=function(){clearTimeout(this.timeoutHelper)},t.\u0275fac=function(e){return new(e||t)(o["\u0275\u0275directiveInject"](r.PLUGIN_CONTEXT),o["\u0275\u0275directiveInject"](o.ElementRef))},t.\u0275cmp=o["\u0275\u0275defineComponent"]({type:t,selectors:[["app-smartscroller"]],viewQuery:function(t,e){var n;1&t&&o["\u0275\u0275staticViewQuery"](s,!0),2&t&&o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(e.canvasRef=n.first)},hostBindings:function(t,e){1&t&&o["\u0275\u0275listener"]("pinchend",function(t){return e.pinchEnd(t)})("pinchcancel",function(t){return e.pinchEnd(t)})("pinchstart",function(t){return e.pinchStart(t)})("pinchmove",function(t){return e.onWheel(t)})("wheel",function(t){return e.onWheel(t)})("touchstart",function(t){return e.dragStart(t)})("mousedown",function(t){return e.dragStart(t)})("touchmove",function(t){return e.drag(t)})("mousemove",function(t){return e.drag(t)},!1,o["\u0275\u0275resolveWindow"])("touchend",function(t){return e.dragEnd(t)},!1,o["\u0275\u0275resolveWindow"])("mouseup",function(t){return e.dragEnd(t)},!1,o["\u0275\u0275resolveWindow"])("click",function(t){return e.click(t)},!1,o["\u0275\u0275resolveWindow"])},decls:6,vars:7,consts:[[1,"indicator"],[1,"smartscroller",3,"ngClass","swipeLeft"],["canvasRef",""],["class","vertical",4,"ngIf"],["class","horizontal",4,"ngIf"],[1,"vertical"],["class","start",4,"ngIf"],["class","end",4,"ngIf"],[1,"start"],[1,"end"],[1,"horizontal"]],template:function(t,e){1&t&&(o["\u0275\u0275element"](0,"div",0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275listener"]("swipeLeft",function(t){return e.pinchStart(t)}),o["\u0275\u0275element"](2,"canvas",null,2),o["\u0275\u0275template"](4,u,3,2,"div",3),o["\u0275\u0275template"](5,p,3,2,"div",4),o["\u0275\u0275elementEnd"]()),2&t&&(o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngClass",o["\u0275\u0275pureFunction3"](3,f,e.isDragging,"vertical"===e.orientation,"both"===e.orientation)),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf","vertical"===e.orientation||"both"===e.orientation),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","horizontal"===e.orientation||"both"===e.orientation))},directives:[a.NgClass,a.NgIf],styles:["[_nghost-%COMP%]{width:100%;height:100%}[_nghost-%COMP%]   .indicator[_ngcontent-%COMP%]{height:10px;width:50px;background:green}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]{position:absolute;top:100%}[_nghost-%COMP%]   .smartscroller[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;border-radius:3px;border:1px solid rgba(var(--theme-foreground-300),.2);overflow:hidden}[_nghost-%COMP%]   .smartscroller.dragging[_ngcontent-%COMP%]{cursor:move}[_nghost-%COMP%]   .smartscroller[_ngcontent-%COMP%]   .horizontal[_ngcontent-%COMP%]   .indicator[_ngcontent-%COMP%]{height:100%;min-width:2px}[_nghost-%COMP%]   .smartscroller[_ngcontent-%COMP%]   .vertical[_ngcontent-%COMP%]   .indicator[_ngcontent-%COMP%]{width:100%;min-height:2px}[_nghost-%COMP%]   .smartscroller[_ngcontent-%COMP%]   .horizontal[_ngcontent-%COMP%], [_nghost-%COMP%]   .smartscroller[_ngcontent-%COMP%]   .vertical[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;display:flex;justify-content:space-between;align-items:flex-start}[_nghost-%COMP%]   .smartscroller[_ngcontent-%COMP%]   .vertical[_ngcontent-%COMP%]{flex-direction:column}[_nghost-%COMP%]   .smartscroller[_ngcontent-%COMP%]   .end[_ngcontent-%COMP%], [_nghost-%COMP%]   .smartscroller[_ngcontent-%COMP%]   .start[_ngcontent-%COMP%]{font-size:.7em}[_nghost-%COMP%]   .smartscroller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{z-index:2}[_nghost-%COMP%]   .smartscroller[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{background:rgba(var(--theme-background-300),.2);position:absolute;width:100%;height:100%}"]}),t}(),m=function(){function t(){}return t.entry=g,t.\u0275mod=o["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},imports:[[a.CommonModule]]}),t}();e.default=m},aP7H:function(t,n){t.exports=e},cfyg:function(t,e){t.exports=n},vOrQ:function(t,e){t.exports=o}})});