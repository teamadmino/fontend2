!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("adm.@angular/common"),require("adm.tslib"),require("adm.@angular/material"),require("adm.@angular/forms"),require("adm.@angular/cdk"),require("adm.@angular/animations"),require("adm.rxjs"),require("adm.lodash"),require("adm.rxjs/operators"),require("adm.shared"),require("adm.@angular/platform-browser"),require("adm.@angular/core")):"function"==typeof define&&define.amd?define(["adm.@angular/common","adm.tslib","adm.@angular/material","adm.@angular/forms","adm.@angular/cdk","adm.@angular/animations","adm.rxjs","adm.lodash","adm.rxjs/operators","adm.shared","adm.@angular/platform-browser","adm.@angular/core"],e):"object"==typeof exports?exports.table=e(require("adm.@angular/common"),require("adm.tslib"),require("adm.@angular/material"),require("adm.@angular/forms"),require("adm.@angular/cdk"),require("adm.@angular/animations"),require("adm.rxjs"),require("adm.lodash"),require("adm.rxjs/operators"),require("adm.shared"),require("adm.@angular/platform-browser"),require("adm.@angular/core")):t.table=e(t["adm.@angular/common"],t["adm.tslib"],t["adm.@angular/material"],t["adm.@angular/forms"],t["adm.@angular/cdk"],t["adm.@angular/animations"],t["adm.rxjs"],t["adm.lodash"],t["adm.rxjs/operators"],t["adm.shared"],t["adm.@angular/platform-browser"],t["adm.@angular/core"])}("undefined"!=typeof self?self:this,(function(t,e,n,o,i,a,r,s,l,c,u,d){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,(function(e){return t[e]}).bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/assets/plugins/table",n(n.s=0)}({0:function(t,e,n){t.exports=n("zUnb")},"0S4P":function(e,n){e.exports=t},"17wl":function(t,n){t.exports=e},"2caw":function(t,e){t.exports=n},"3xDq":function(t,e){t.exports=o},"8Yb7":function(t,e){t.exports=i},"9gj6":function(t,e){t.exports=a},Vgaj:function(t,e){t.exports=r},YLtl:function(t,e){t.exports=s},aP7H:function(t,e){t.exports=l},cfyg:function(t,e){t.exports=c},"vG+p":function(t,e){t.exports=u},vOrQ:function(t,e){t.exports=d},zUnb:function(t,e,n){"use strict";n.r(e),n.d(e,"TableModule",(function(){return Z}));var o=n("2caw"),i=n("vOrQ"),a=n("YLtl"),r=n("Vgaj"),s=n("aP7H"),l=function(){function t(){this.container=[],this.maxBufferSize=1e4}return t.prototype.set=function(t,e){var n=t%this.maxBufferSize,o=this.container[n];o?(o.index=t,o.data=e,o.bufferindex=n,this.container[n]=o):this.container[n]={index:t,data:e,bufferindex:n}},t.prototype.get=function(t){var e=this.container[t%this.maxBufferSize];return e&&e.index!==t?null:e},t.prototype.clear=function(t,e){for(var n=t<=e?e:t,o=t<=e?t:e;o<=n;o++){var i=this.container[o%this.maxBufferSize];if(i){console.log("delete,",i.data);for(var a=0,r=Object.keys(i);a<r.length;a++)delete i[r[a]]}}},t.prototype.clearAll=function(){console.log("BUFFER CLEARALL"),this.container.forEach((function(t){var e=t;if(e){e.index=-1;for(var n=0,o=Object.keys(e);n<o.length;n++)delete e[o[n]]}}))},t}(),c=function(){function t(t,e){var n=this;this.config=t,this.sanitizer=e,this.ngUnsubscribe=new r.Subject,this.resultSubject=new r.BehaviorSubject(null),this.result$=this.resultSubject.asObservable(),this.loadDataStart=new r.Subject,this.triggerLoadData=new r.Subject,this.currentRequests=[],this.columns=[],this.displayedColumns=[],this.keyIds=[],this.indexes=[],this.cursorAbsPos=0,this.data={},this.viewpos=0,this.rows={},this.totalsize=1,this.predefinedStyles=[],this.initialBrowseRequestHappend=!1,this.state={keys:{"#position":"first"},prevKeys:null,prevSelectedColumnIndex:null,cursor:0,count:1,index:1,before:10,after:10,cursorPosPercent:0,totalsize:0,cursorpos:0,selectedColumnIndex:0,selectedRowIndex:0,selectedHeaderColumnIndex:0,navigationColumnIndex:0,navigationRowIndex:0},this.buffer=new l,this.autoRefresh=0,this.counter=0,this.keyChangedByFrontend=!1,this.triggerLoadData.pipe(Object(s.takeUntil)(this.ngUnsubscribe)).subscribe((function(t){n.loadData()}))}return t.prototype.connect=function(){return this.resultSubject.asObservable()},t.prototype.disconnect=function(){this.refreshTimeout&&clearTimeout(this.refreshTimeout),this.resultSubject.complete(),this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()},t.prototype.setAutoRefresh=function(){var t=this;this.refreshTimeout&&clearTimeout(this.refreshTimeout),this.autoRefresh&&(this.refreshTimeout=setTimeout((function(){t.loadData(),t.autoRefresh&&t.setAutoRefresh()}),this.autoRefresh))},t.prototype.loadData=function(t){var e=this;void 0===t&&(t=0),this.clearRequests();var n=t;return this.counter++,new Promise((function(o,i){var a={subscription:null,observable:null,shift:t,timeout:null,resolvePromise:o,rejectPromise:i};e.state.cursorPosPercent=e.state.cursor/(e.state.count-1),e.state.selectedRowIndex=e.cursorAbsPos,e.loadDataStart.next(e.state);var r=isNaN(e.state.cursorpos)?0:e.state.cursorpos;a.timeout=setTimeout((function(){e.currentRequests[e.currentRequests.length-1]!==a&&(e.clearRequest(a),e.startLatestRequest())}),1e3),a.observable=e.config.listFunction(e.state.keys,r,n,Math.max(e.state.count,1),e.state.index,e.state.before,e.state.after),e.currentRequests.push(a),e.currentRequests.length<=1&&e.startLatestRequest()}))},t.prototype.startLatestRequest=function(){var t=this.currentRequests[this.currentRequests.length-1];t&&!t.subscription&&(t.subscription=this.subscribeTo(t))},t.prototype.subscribeTo=function(t){var e=this;return t.observable.pipe(Object(s.takeUntil)(this.ngUnsubscribe),Object(s.catchError)((function(){return Object(r.of)([])}))).subscribe((function(n){e.updateData(n),e.clearRequest(t),e.startLatestRequest(),e.initialBrowseRequestHappend=!0,t.resolvePromise(n)}),(function(n){e.clearRequest(t),e.startLatestRequest(),t.rejectPromise()}))},t.prototype.calculateShift=function(t){for(var e=t,n=0,o=this.currentRequests;n<o.length;n++)e+=o[n].shift;return e},t.prototype.setKeys=function(t){t&&(this.state.keys=Object(a.cloneDeep)(t),0!==this.currentRequests.length&&(this.clearRequests(),this.loadData()))},t.prototype.clearRequest=function(t){for(var e=this.currentRequests.indexOf(t),n=0;n<=e;n++){var o=this.currentRequests[0];o.subscription&&o.subscription.unsubscribe(),o.timeout&&clearTimeout(o.timeout),o.subscription=null,this.currentRequests.shift()}},t.prototype.clearRequests=function(){for(var t=this.currentRequests.length,e=0;e<t;e++){var n=this.currentRequests[0];n.subscription&&n.subscription.unsubscribe(),n.timeout&&clearTimeout(n.timeout),n.subscription=null,this.currentRequests.shift()}},t.prototype.updateData=function(t){if(t&&t.data){var e=parseInt(t.totalsize,10),n=parseInt(t.viewpos,10),o=parseInt(t.cursorpos,10);this.data=t,this.totalsize=e,this.state.totalsize=this.totalsize,this.viewpos=n-1,this.predefinedStyles=t.predefinedStyles,this.rows=[];for(var i=0;i<this.data.before.length;i++)this.rows[a=this.viewpos-this.data.before.length+i]=r=this.data.before[i],this.setData(a,r);for(i=0;i<this.data.data.length;i++){var a=this.viewpos+i;this.rows[this.viewpos+i]=r=this.data.data[i],this.setData(a,r)}for(i=0;i<this.data.after.length;i++){var r;this.rows[a=this.viewpos+this.data.data.length+i]=r=this.data.after[i],this.setData(a,r)}this.state.keys=t.cursor,this.cursorAbsPos=this.viewpos+o,this.state.cursorpos=parseInt(t.cursorpos,10),this.resultSubject.next(this.rows)}},t.prototype.setData=function(t,e){var n=this.buffer.get(t);this.buffer.set(t,this.processData(e,null==n?void 0:n.data))},t.prototype.processData=function(t,e){e||((e={}).origData={},e.dataVersion=0,e.styles={},e.processedData=Object(a.cloneDeep)(t));for(var n={},o=0,i=Object.keys(t);o<i.length;o++){var r=i[o];n[r]=r.startsWith("$")&&"string"==typeof t[r]?t[r]!==e.origData[r]?this.sanitizer.bypassSecurityTrustHtml(t[r]):e.processedData[r]:t[r]}e.styles={};for(var s=0,l=this.columns;s<l.length;s++){var c=l[s];e.styles[c.id]={};var u=c.style?Object(a.cloneDeep)(c.style):{},d=c.containerStyle?Object(a.cloneDeep)(c.containerStyle):{},h={},p=t[c.extraCellDefinitions],g=p&&p.style,f=p&&p.containerStyle,m=p&&p.bar,v=p&&void 0!==p.predefinedStyleId&&void 0!==this.predefinedStyles&&this.predefinedStyles[p.predefinedStyleId],y=p&&void 0!==p.predefinedContainerStyleId&&void 0!==this.predefinedStyles&&this.predefinedStyles[p.predefinedContainerStyleId],C=p&&void 0!==p.predefinedBarStyleId&&void 0!==this.predefinedStyles&&this.predefinedStyles[p.predefinedBarStyleId];g&&Object.assign(u,g),v&&Object.assign(u,v),f&&Object.assign(d,f),y&&Object.assign(d,y),m&&Object.assign(h,m),C&&Object.assign(h,C),e.styles[c.id].style=u,e.styles[c.id].containerStyle=d,e.styles[c.id].barStyle=h}return e.processedData=n,e.origData=Object(a.cloneDeep)(t),e},t.prototype.findRowByKeys=function(t){var e=this;if(!this.state.keys)return 0;for(var n=0,o=function(o){var a=t[o];n=o;var r=!0;if(Object.keys(i.state.keys).forEach((function(t){a[t]!==e.state.keys[t]&&(r=!1)})),r)return"break"},i=this,a=t.length-1;a>=0&&"break"!==o(a);a--);return n},t}(),u=n("cfyg"),d=n("9gj6"),h=Object(d.trigger)("adminoTableRowAnimation",[Object(d.transition)("* => true",[Object(d.query)(".cell-content",[Object(d.style)({opacity:0}),Object(d.animate)("0.2s",Object(d.style)({opacity:1}))])])]),p=n("vG+p"),g=n("8Yb7"),f=n("3xDq"),m=new i.InjectionToken("CONTAINER_DATA"),v=n("0S4P"),y=["inputRef"];function C(t,e){if(1&t&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275element"](1,"input",5,6),i["\u0275\u0275elementContainerEnd"]()),2&t){var n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("value",n.data.value)("type","number"===n.data.column.type?"number":"text")}}function b(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"mat-option",9),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit;i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](n)}}function w(t,e){if(1&t&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"mat-select",7,6),i["\u0275\u0275template"](3,b,2,2,"mat-option",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()),2&t){var n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("formControl",n.toppings),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",n.toppingList)}}function S(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"mat-form-field",3),i["\u0275\u0275template"](1,C,3,2,"ng-container",4),i["\u0275\u0275template"](2,w,4,2,"ng-container",4),i["\u0275\u0275elementEnd"]()),2&t){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","string"===(null==n.data.column?null:n.data.column.type)||"zeropadded"===(null==n.data.column?null:n.data.column.type)||"number"===(null==n.data.column?null:n.data.column.type)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","select"===(null==n.data.column?null:n.data.column.type))}}function x(t,e){if(1&t){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mat-checkbox",10,6),i["\u0275\u0275listener"]("focusin",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().onFocus()}))("focusout",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().onBlur()})),i["\u0275\u0275elementEnd"]()}2&t&&i["\u0275\u0275property"]("color","primary")}var P=function(t){return{focused:t}},R=function(){function t(t,e,n){this.cd=t,this.renderer=e,this.data=n,this.toppingList=["Extra cheese","Mushroom","Onion","Pepperoni","Sausage","Tomato"],this.toppings=new f.FormControl,this.isFocused=!1}return t.prototype.keydown=function(t){switch(t.key){case"Enter":this.data.table.removeEditOverlay(),this.data.table.el.nativeElement.focus()}},t.prototype.clickEvent=function(){this.inputRef.nativeElement.focus(),this.compRef.focus&&this.compRef.focus()},t.prototype.ngOnInit=function(){},t.prototype.ngAfterViewInit=function(){var t=this;this.focusListener=this.renderer.listen(this.inputRef.nativeElement,"focus",(function(){t.isFocused=!0})),this.blurListener=this.renderer.listen(this.inputRef.nativeElement,"blur",(function(){t.isFocused=!1})),this.inputRef.nativeElement.focus(),this.compRef.focus&&setTimeout((function(){t.compRef.focus()})),this.cd.detectChanges()},t.prototype.onFocus=function(){this.isFocused=!0},t.prototype.onBlur=function(){this.isFocused=!1},t.prototype.ngOnDestroy=function(){this.focusListener&&this.focusListener(),this.blurListener&&this.blurListener()},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](i.ChangeDetectorRef),i["\u0275\u0275directiveInject"](i.Renderer2),i["\u0275\u0275directiveInject"](m))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["app-editpopup"]],viewQuery:function(t,e){var n;1&t&&(i["\u0275\u0275viewQuery"](y,!0,i.ElementRef),i["\u0275\u0275viewQuery"](y,!0)),2&t&&(i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(e.inputRef=n.first),i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(e.compRef=n.first))},hostBindings:function(t,e){1&t&&i["\u0275\u0275listener"]("keydown",(function(t){return e.keydown(t)}))("click",(function(){return e.clickEvent()}))},decls:3,vars:5,consts:[[1,"popupwrapper","mat-elevation-z8",3,"ngClass"],["appearance","outline",4,"ngIf"],[3,"color","focusin","focusout",4,"ngIf"],["appearance","outline"],[4,"ngIf"],["matInput","",3,"value","type"],["inputRef",""],["multiple","",3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"color","focusin","focusout"]],template:function(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275template"](1,S,3,2,"mat-form-field",1),i["\u0275\u0275template"](2,x,2,1,"mat-checkbox",2),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275property"]("ngClass",i["\u0275\u0275pureFunction1"](3,P,e.isFocused)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","select"===(null==e.data.column?null:e.data.column.type)||"string"===(null==e.data.column?null:e.data.column.type)||"zeropadded"===(null==e.data.column?null:e.data.column.type)||"number"===(null==e.data.column?null:e.data.column.type)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","boolean"===(null==e.data.column?null:e.data.column.type)))},directives:[v.NgClass,v.NgIf,o.MatFormField,o.MatInput,o.MatSelect,f.NgControlStatus,f.FormControlDirective,v.NgForOf,o.MatOption,o.MatCheckbox],styles:["[_nghost-%COMP%], [_nghost-%COMP%]   .popupwrapper[_ngcontent-%COMP%]{width:100%;height:100%;display:flex}[_nghost-%COMP%]   .popupwrapper[_ngcontent-%COMP%]{align-items:center;justify-content:center;background:rgba(var(--theme-background-600),1);overflow:hidden;border:1px solid rgba(var(--theme-foreground-500),.2)}[_nghost-%COMP%]   .popupwrapper.focused[_ngcontent-%COMP%]{border:2px solid rgba(var(--theme-primary-500),1)}[_nghost-%COMP%]   .popupwrapper[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     label{margin:0}[_nghost-%COMP%]   .popupwrapper[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{text-align:right}[_nghost-%COMP%]   .popupwrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-inner-spin-button, [_nghost-%COMP%]   .popupwrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}[_nghost-%COMP%]   .popupwrapper[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}[_nghost-%COMP%]   .popupwrapper[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%] {background:none;width:100%;height:100%}[_nghost-%COMP%]   .popupwrapper[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-flex{margin:0;height:100%}[_nghost-%COMP%]   .popupwrapper[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-infix{border-top:.18em solid transparent;height:100%;width:auto!important}[_nghost-%COMP%]   .popupwrapper[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-outline{display:none;top:0}[_nghost-%COMP%]   .popupwrapper[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-wrapper{margin:0;padding:0;height:100%}"]}),t}(),O=["tableRef"],M=["scrollerRef"],E=["fakeContentRef"],_=["scrollerContentRef"],k=["bodyRef"],I=["headerRef"],j=["mainRef"],D=function(t){return{first:t}};function z(t,e){if(1&t){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",20),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](n);var t=e.$implicit;return i["\u0275\u0275nextContext"](2).setSelectedHeader(t.index)}))("contextmenu",(function(t){i["\u0275\u0275restoreView"](n);var o=e.$implicit;return i["\u0275\u0275nextContext"](2).onHeaderContextMenu(t,o,o.index)})),i["\u0275\u0275element"](1,"div",21),i["\u0275\u0275elementEnd"]()}if(2&t){var o=e.$implicit,a=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("ngStyle",a.getHeaderContainerStyle(o,o.index))("ngClass",i["\u0275\u0275pureFunction1"](4,D,0===o.index)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("innerHTML",o.description,i["\u0275\u0275sanitizeHtml"])("ngStyle",a.getHeaderStyle(o,o.index))}}var H=function(t){return{height:t}};function q(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"div",17,18),i["\u0275\u0275template"](2,z,2,6,"div",19),i["\u0275\u0275elementEnd"]()),2&t){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("ngStyle",i["\u0275\u0275pureFunction1"](2,H,n.headerHeight+"px")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",n.getVisibleColumns())}}function L(t,e){if(1&t&&i["\u0275\u0275element"](0,"div",29),2&t){var n=i["\u0275\u0275nextContext"](3);i["\u0275\u0275property"]("ngStyle",n.oddRowStyle)}}function T(t,e){if(1&t&&i["\u0275\u0275element"](0,"div",30),2&t){var n=i["\u0275\u0275nextContext"]().$implicit,o=i["\u0275\u0275nextContext"]().$implicit,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("ngStyle",a.getBarStyle(n,o.data&&o.data.data,n.index))}}var B=function(t,e,n,o){return{columnselected:t,columnnavigation:e,first:n,last:o}};function F(t,e){if(1&t){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",24,25),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](n);var t=e.$implicit,o=i["\u0275\u0275nextContext"]().$implicit;return i["\u0275\u0275nextContext"]().setSelected(o.data,t.index,"cellClick")}))("dblclick",(function(){i["\u0275\u0275restoreView"](n);var t=e.$implicit,o=i["\u0275\u0275reference"](1),a=i["\u0275\u0275nextContext"]().$implicit;return i["\u0275\u0275nextContext"]().setSelected(a.data,t.index,"cellDoubleClick",o,a)}))("contextmenu",(function(t){i["\u0275\u0275restoreView"](n);var o=e.$implicit,a=i["\u0275\u0275nextContext"]().$implicit;return i["\u0275\u0275nextContext"]().onContextMenu(t,a,o.index)})),i["\u0275\u0275template"](2,L,1,1,"div",26),i["\u0275\u0275element"](3,"div",27,25),i["\u0275\u0275template"](5,T,1,1,"div",28),i["\u0275\u0275elementEnd"]()}if(2&t){var o=e.$implicit,a=i["\u0275\u0275reference"](1),r=i["\u0275\u0275nextContext"]().$implicit,s=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("ngClass",i["\u0275\u0275pureFunction4"](6,B,s.dataSource.cursorAbsPos===r.absoluteId&&o.index===s.dataSource.state.selectedColumnIndex,s.activeRow===r.absoluteId&&o.index===s.dataSource.state.navigationColumnIndex,0===o.index,o.index===s.dataSource.columns.length-1))("ngStyle",s.getContainerStyle(o,r.data&&r.data.data,o.index,r,a)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",r.absoluteId%2==0),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngStyle",s.getStyle(o,r.data&&r.data.data,o.index))("innerHtml",s.format(s.getCellContent(r,o),o.format),i["\u0275\u0275sanitizeHtml"]),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",null==r||null==r.data||null==r.data.data||null==r.data.data.styles[o.id]?null:r.data.data.styles[o.id].barStyle)}}var A=function(t,e,n){return{rowselected:t,evenrow:e,lastrow:n}};function V(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"div",22),i["\u0275\u0275template"](1,F,6,11,"div",23),i["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,o=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("ngClass",i["\u0275\u0275pureFunction3"](5,A,n.absoluteId===o.dataSource.cursorAbsPos,n.absoluteId%2==0,n.absoluteId===o.dataSource.totalsize-1))("ngStyle",o.getRowStyle(n))("@adminoTableRowAnimation",n.data&&void 0!==n.data.data),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",o.getVisibleColumns())("ngForTrackBy",o.trackByFnCell)}}function W(t,e){if(1&t&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275elementStart"](1,"div",31),i["\u0275\u0275elementStart"](2,"div",32),i["\u0275\u0275elementStart"](3,"table"),i["\u0275\u0275elementStart"](4,"tr"),i["\u0275\u0275elementStart"](5,"td"),i["\u0275\u0275text"](6,"notfittingRowHeight"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"td"),i["\u0275\u0275text"](8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"tr"),i["\u0275\u0275elementStart"](10,"td"),i["\u0275\u0275text"](11,"datasource abs position"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](12,"td"),i["\u0275\u0275text"](13),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](14,"tr"),i["\u0275\u0275elementStart"](15,"td"),i["\u0275\u0275text"](16,"not fitting rowheight"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](17,"td"),i["\u0275\u0275text"](18),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](19,"tr"),i["\u0275\u0275elementStart"](20,"td"),i["\u0275\u0275text"](21,"rowStart - rowEnd"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](22,"td"),i["\u0275\u0275text"](23),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](24,"tr"),i["\u0275\u0275elementStart"](25,"td"),i["\u0275\u0275text"](26,"totalsize"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](27,"td"),i["\u0275\u0275text"](28),i["\u0275\u0275pipe"](29,"number"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](30,"tr"),i["\u0275\u0275elementStart"](31,"td"),i["\u0275\u0275text"](32,"visibleRowCount"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](33,"td"),i["\u0275\u0275text"](34),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](35,"tr"),i["\u0275\u0275elementStart"](36,"td",33),i["\u0275\u0275text"](37,"scrollPosCoeff"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](38,"td"),i["\u0275\u0275text"](39),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](40,"tr"),i["\u0275\u0275elementStart"](41,"td",33),i["\u0275\u0275text"](42,"smallPage"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](43,"td"),i["\u0275\u0275text"](44),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](45,"tr"),i["\u0275\u0275elementStart"](46,"td",33),i["\u0275\u0275text"](47,"scrollPosCoeffNormal"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](48,"td"),i["\u0275\u0275text"](49),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](50,"tr"),i["\u0275\u0275elementStart"](51,"td"),i["\u0275\u0275text"](52,"scrollTop"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](53,"td"),i["\u0275\u0275text"](54),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](55,"tr"),i["\u0275\u0275elementStart"](56,"td"),i["\u0275\u0275text"](57,"maxScrollPos"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](58,"td"),i["\u0275\u0275text"](59),i["\u0275\u0275pipe"](60,"number"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](61,"tr"),i["\u0275\u0275elementStart"](62,"td"),i["\u0275\u0275text"](63,"fakeScrollerHeight"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](64,"td"),i["\u0275\u0275text"](65),i["\u0275\u0275pipe"](66,"number"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](67,"div",32),i["\u0275\u0275elementStart"](68,"table"),i["\u0275\u0275elementStart"](69,"tr"),i["\u0275\u0275elementStart"](70,"td"),i["\u0275\u0275text"](71,"cursorpos"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](72,"td"),i["\u0275\u0275text"](73),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](74,"tr"),i["\u0275\u0275elementStart"](75,"td"),i["\u0275\u0275text"](76,"activeRow"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](77,"td"),i["\u0275\u0275text"](78),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](79,"tr"),i["\u0275\u0275elementStart"](80,"td"),i["\u0275\u0275text"](81,"largePage"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](82,"td"),i["\u0275\u0275text"](83),i["\u0275\u0275pipe"](84,"number"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](85,"tr"),i["\u0275\u0275elementStart"](86,"td"),i["\u0275\u0275text"](87,"largePageSize"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](88,"td"),i["\u0275\u0275text"](89),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](90,"tr"),i["\u0275\u0275elementStart"](91,"td"),i["\u0275\u0275text"](92,"largePageCoeff"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](93,"td"),i["\u0275\u0275text"](94),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](95,"tr"),i["\u0275\u0275elementStart"](96,"td"),i["\u0275\u0275text"](97,"lastLargePage"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](98,"td"),i["\u0275\u0275text"](99),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](100,"tr"),i["\u0275\u0275elementStart"](101,"td"),i["\u0275\u0275text"](102,"adjustedTotalsize"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](103,"td"),i["\u0275\u0275text"](104),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](105,"tr"),i["\u0275\u0275elementStart"](106,"td"),i["\u0275\u0275text"](107,"rowCountOnLastLargePage"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](108,"td"),i["\u0275\u0275text"](109),i["\u0275\u0275pipe"](110,"number"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](111,"tr"),i["\u0275\u0275elementStart"](112,"td"),i["\u0275\u0275text"](113,"rowHeight"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](114,"td"),i["\u0275\u0275text"](115),i["\u0275\u0275pipe"](116,"number"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](117,"tr"),i["\u0275\u0275elementStart"](118,"td"),i["\u0275\u0275text"](119,"numOfRowSlots"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](120,"td"),i["\u0275\u0275text"](121),i["\u0275\u0275pipe"](122,"number"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](123,"tr"),i["\u0275\u0275elementStart"](124,"td"),i["\u0275\u0275text"](125,"viewportHeight"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](126,"td"),i["\u0275\u0275text"](127),i["\u0275\u0275pipe"](128,"number"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()),2&t){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](8),i["\u0275\u0275textInterpolate"](n.notfittingRowHeight),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate"](n.dataSource.cursorAbsPos),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate"](n.notfittingRowHeight),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate2"]("",n.rowStart," - ",n.rowEnd,""),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](29,24,n.totalsize)),i["\u0275\u0275advance"](6),i["\u0275\u0275textInterpolate"](n.visibleRowCount),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate"](n.scrollPosCoeff),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate"](n.smallPage),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate"](n.scrollPosCoeffNormal),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate"](n.scrollPos),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](60,26,n.maxScrollPos)),i["\u0275\u0275advance"](6),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](66,28,n.fakeScrollerHeight)),i["\u0275\u0275advance"](8),i["\u0275\u0275textInterpolate"](n.dataSource.state.cursorpos),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate"](n.activeRow),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](84,30,n.largePage)),i["\u0275\u0275advance"](6),i["\u0275\u0275textInterpolate"](n.largePageSize),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate"](n.largePageCoeff),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate"](n.lastLargePage),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate"](n.adjustedTotalsize),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](110,32,n.rowCountOnLastLargePage)),i["\u0275\u0275advance"](6),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](116,34,n.rowHeight)),i["\u0275\u0275advance"](6),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](122,36,n.viewportSize/n.rowHeight)),i["\u0275\u0275advance"](6),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](128,38,n.viewportSize))}}var U=function(t){return{hidetable:t}},N=function(t){return{"d-none":t}},$=function(t,e){return{show:t,bottom:e}},Q=function(){function t(t,e,n,o,a,s,l){this.cd=t,this.formatService=e,this.sanitizer=n,this.overlay=o,this.el=a,this.injector=s,this.renderer=l,this.ngUnsubscribe=new r.Subject,this.valueChange=new i.EventEmitter,this.cellClick=new i.EventEmitter,this.cellChange=new i.EventEmitter,this.cellDoubleClick=new i.EventEmitter,this.headerCellClick=new i.EventEmitter,this.cellContextMenu=new i.EventEmitter,this.headerCellContextMenu=new i.EventEmitter,this._autoRefresh=0,this.columnWidths=[],this.colPositions=[],this.stickyBreakpoints=[],this.cumulatedColumnWidth=0,this.vrows=[],this.oddRowStyle={},this.headerHeight=50,this.rowHeight=50,this.hideHeader=!1,this.debug=!1,this.selectedRowStyle={},this.selectedCellStyle={},this.tableStyle={},this.inactiveSelectedRowStyle={},this.inactiveSelectedCellStyle={},this.navigationCellStyle={},this.inactiveNavigationCellStyle={},this.viewportSize=0,this.browserMaxSize=0,this.largePage=0,this.calculatedLargePageSize=3e4,this.largePageSize=0,this.lastLargePage=0,this.rowCountOnLastLargePage=0,this.notfittingRowHeight=0,this.smallPage=0,this.visibleRowCount=0,this.scrollPos=0,this.maxScrollPos=0,this.prevScrollPos=0,this.scrollPosCoeff=0,this.scrollPosCoeffNormal=0,this.scrollBarWidth=0,this.largePageCoeff=0,this.totalsize=-1,this.adjustedTotalsize=0,this.scrollPercent=1,this.fakeScrollerHeight=0,this.manualScroll=!1,this.rowStart=0,this.rowEnd=0,this.prevRowStart=-1,this.prevRowEnd=-1,this.asd=100,this.leavespace=2,this.activeRow=0,this.activeRowPos=0,this.keyOverrides=[],this.isFocused=!1,this.selectedCellDiv=null,this.selectedVrow=null}return Object.defineProperty(t.prototype,"columns",{get:function(){return this._columns},set:function(t){this._columns=t,this.updateColumns()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"indexes",{get:function(){return this._indexes},set:function(t){this._indexes=t,this.dataSource.indexes=this.indexes},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoRefresh",{get:function(){return this._autoRefresh},set:function(t){this._autoRefresh=t,this.dataSource.autoRefresh=this.autoRefresh,this.dataSource.setAutoRefresh()},enumerable:!1,configurable:!0}),t.prototype.resize=function(t){this.scrollEvent(),this.reinit(),this.updateEditOverlay()},t.prototype.focusEvent=function(t){this.isFocused=!0},t.prototype.blurEvent=function(t){this.isFocused=!1},t.prototype.mouseUp=function(t){this.manualScroll=!1},t.prototype.onKeydownHandler=function(t){if(this.keyOverrides.find((function(e){return"any"===e.key||e.key===t.key&&"keydown"===e.trigger})))console.log("OVERRIDE");else switch(t.key){case"ArrowDown":this.goDownBy(1),t.preventDefault();break;case"ArrowUp":this.goUpBy(1),t.preventDefault();break;case"Home":this.gotoPos(0),this.setActiveRow(0),t.preventDefault();break;case"End":this.gotoPos(this.adjustedTotalsize),this.setActiveRow(this.totalsize-1),t.preventDefault();break;case"PageUp":this.goUpBy(this.activeRow>this.rowStart&&this.activeRow<this.rowEnd?this.activeRow-this.rowStart:this.visibleRowCount-2),t.preventDefault();break;case"PageDown":this.goDownBy(this.activeRow>this.rowStart&&this.activeRow<this.rowEnd?this.rowEnd-this.activeRow:this.visibleRowCount-2),t.preventDefault();break;case"Enter":this.setSelected(this.dataSource.buffer.get(this.activeRow),this.dataSource.state.navigationColumnIndex,"cellDoubleClick"),t.preventDefault();break;case" ":this.setSelected(this.dataSource.buffer.get(this.activeRow),this.dataSource.state.navigationColumnIndex,"cellClick"),t.preventDefault();break;case"ArrowRight":this.dataSource.state.navigationColumnIndex<this.dataSource.columns.length-1&&(this.dataSource.state.navigationColumnIndex++,this.handleCellChange()),t.preventDefault();break;case"ArrowLeft":console.log(this.dataSource.state.navigationColumnIndex),this.dataSource.state.navigationColumnIndex>0&&(this.dataSource.state.navigationColumnIndex--,this.handleCellChange()),t.preventDefault()}},t.prototype.goDownBy=function(t){this.totalsize<=1||(this.activeRow<this.rowStart?this.gotoPos(this.activeRow):this.activeRow>this.rowEnd&&this.rowEnd!==this.totalsize-1?this.gotoPos(this.activeRow-this.visibleRowCount+2,!0):(this.activeRow+t<this.totalsize?this.activeRow+=t:this.activeRow=this.totalsize-1,this.activeRow>this.rowEnd-1&&this.gotoPos(this.activeRow-this.visibleRowCount+2,!0)),this.dataSource.state.navigationRowIndex=this.activeRow)},t.prototype.goUpBy=function(t){console.log("up"),this.activeRow<this.rowStart?this.gotoPos(this.activeRow):this.activeRow>this.rowEnd&&this.rowEnd!==this.totalsize-1?(console.log(this.activeRow,this.totalsize,this.rowEnd),this.gotoPos(this.activeRow-this.visibleRowCount+2,!0)):(this.activeRow-t>=0?this.activeRow-=t:this.activeRow=0,this.activeRow<=this.rowStart&&this.setToExactRow(this.activeRow===this.rowStart&&this.rowEnd===this.totalsize-1?1:this.rowEnd===this.totalsize-1?-1:1),this.activeRow<this.rowStart&&this.gotoPos(this.activeRow)),this.dataSource.state.navigationRowIndex=this.activeRow},t.prototype.setToExactRow=function(t){var e=this.tableRef.nativeElement.scrollTop%this.rowHeight;0!==e&&(this.tableRef.nativeElement.scrollTop-=t<0?e-this.rowHeight:e)},t.prototype.relativeScroll=function(t){this.tableRef.nativeElement.scrollTop+=t},t.prototype.getKeyAtCursor=function(t){if(this.dataSource.data&&this.dataSource.data.data[t])return this.dataSource.data.data[t]},t.prototype.setKeys=function(t){this.dataSource.setKeys(t),this.valueChange.next(this.dataSource.state)},t.prototype.ngOnInit=function(){this.browserMaxSize=this.calcMaxBrowserScrollSize(),this.scrollBarWidth=7},t.prototype.ngAfterViewInit=function(){var t=this;this.dataSource.loadDataStart.pipe(Object(s.takeUntil)(this.ngUnsubscribe)).subscribe((function(e){t.valueChange.next(e)})),this.dataSource.connect().pipe(Object(s.takeUntil)(this.ngUnsubscribe)).subscribe((function(e){e&&(t.totalsize!==t.dataSource.totalsize&&(t.totalsize=t.dataSource.totalsize,t.updateSize(),t.pageChange(),t.cd.detectChanges(),t.calculateWidths()),t.updateRows(),t.refreshVrows(),t.cd.detectChanges()),t.valueChange.next(t.dataSource.state)})),this.reinit(),this.timeoutHelper=setTimeout((function(e){t.reinit(),t.updateDataSource(!0)}))},t.prototype.reinit=function(){this.updateSize(),this.updateRows(),this.pageChange(),this.cd.detectChanges(),this.calculateWidths(),this.prevRowStart=this.rowStart,this.prevRowEnd=this.rowEnd},t.prototype.onContextMenu=function(t,e,n){var o,i;this.setSelected(e.data,n),this.cellContextMenu.next({e:t,keys:null===(i=null===(o=e.data)||void 0===o?void 0:o.data)||void 0===i?void 0:i.origData,rowAbsoluteIndex:e.absoluteId,column:n})},t.prototype.onHeaderContextMenu=function(t,e,n){this.headerCellContextMenu.next({e:t,column:n})},t.prototype.setSelectedHeader=function(t){this.dataSource.state.selectedHeaderColumnIndex=t,this.headerCellClick.next()},t.prototype.setActiveRow=function(t,e){void 0===e&&(e=null),this.activeRow=t,this.activeRowPos=0,this.dataSource.state.navigationRowIndex=this.activeRow},t.prototype.setSelected=function(t,e,n,o,i){void 0===e&&(e=null),void 0===n&&(n=null),void 0===o&&(o=null),void 0===i&&(i=null),this.removeEditOverlay(),t&&t.data&&t.data.processedData&&(this.dataSource.cursorAbsPos=t.index,this.activeRow=t.index,this.dataSource.state.navigationRowIndex=this.activeRow,this.setPrevValues(),this.setKeys(t.data.origData),null!==e&&(this.dataSource.state.selectedColumnIndex=e,this.dataSource.state.navigationColumnIndex=e),"cellClick"===n?this.cellClick.next():"cellDoubleClick"===n&&this.cellDoubleClick.next()),this.handleCellChange(),this.cd.detectChanges(),this.dataSource.state.cursorpos=this.dataSource.cursorAbsPos-this.rowStart,"cellDoubleClick"===n&&this.openEditOverlay(this.dataSource.state.selectedColumnIndex,this.selectedCellDiv,i)},t.prototype.openEditOverlay=function(t,e,n){if(this.columns[t].editable&&e){n||(n=this.selectedVrow),this.removeEditOverlay();var o=this.overlay.position().flexibleConnectedTo(e).withPositions([{originX:"center",originY:"center",overlayX:"center",overlayY:"center"},{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"bottom"}]),i=this.overlay.create({positionStrategy:o,width:e.offsetWidth,height:e.offsetHeight}),a=new WeakMap;a.set(m,{table:this,overlayRef:i,column:this.columns[t],value:n.data.data.origData[this.columns[t].id]});var r=new g.PortalInjector(this.injector,a),s=new g.ComponentPortal(R,null,r);i.attach(s),this.currentOverlayData={overlayRef:i,cellDiv:e,vrow:n}}},t.prototype.removeEditOverlay=function(){this.currentOverlayData&&(this.currentOverlayData.overlayRef.detach(),this.currentOverlayData.overlayRef.dispose(),this.currentOverlayData=null)},t.prototype.updateEditOverlay=function(){if(this.currentOverlayData){this.currentOverlayData.overlayRef.updatePosition();var t=this.tableRef.nativeElement.scrollTop,e=this.tableRef.nativeElement.scrollLeft,n=this.tableRef.nativeElement.offsetHeight,o=this.tableRef.nativeElement.offsetWidth,i=this.currentOverlayData.vrow.pos,a=this.currentOverlayData.overlayRef.overlayElement.offsetHeight,r=this.currentOverlayData.cellDiv.offsetLeft,s=this.currentOverlayData.overlayRef.overlayElement.offsetWidth;if(console.log("scrollLeft",e),console.log("cellLeft",this.currentOverlayData.cellDiv.offsetLeft),t>i||t<i-n+a)this.removeEditOverlay();else if(s>o){var l=s-o+20;(e-l>r||r+s-l>e+o)&&this.removeEditOverlay()}else(e>r||r+s>e+o)&&this.removeEditOverlay()}},t.prototype.setPrevValues=function(){this.dataSource.state.prevKeys=this.dataSource.state.keys,this.dataSource.state.prevSelectedColumnIndex=this.dataSource.state.selectedColumnIndex},t.prototype.handleCellChange=function(){for(var t=this.dataSource.state.navigationColumnIndex,e=this.columnWidths.reduce((function(e,n,o){return o<t?e+n:e}),0),n=this.columnWidths[t],o=e+n,i=this.tableRef.nativeElement.clientWidth,a=this.tableRef.nativeElement.scrollLeft,r=-1,s=0;s<this.stickyBreakpoints.length;s++)a>this.colPositions[s]-this.stickyBreakpoints[s]&&(r=s);var l=this.stickyBreakpoints[r];o>a+i?this.tableRef.nativeElement.scrollLeft=e-(i-n):e<a+l&&(this.tableRef.nativeElement.scrollLeft=e-l),this.cellChange.next()},t.prototype.gotoPos=function(t,e){void 0===t&&(t=0),void 0===e&&(e=!1);var n=0;t>=this.adjustedTotalsize&&(t=this.adjustedTotalsize-1e-4,n=this.notfittingRowHeight);var o=this.largePageSize>0?Math.floor(t/this.largePageSize):0;this.largePage=o,this.pageChange(),this.scrollPos=this.tableRef.nativeElement.scrollTop=((this.largePageSize>0?t%this.largePageSize:0)+this.largePageCoeff)*this.rowHeight+n+(e&&this.notfittingRowHeight!==this.rowHeight?this.notfittingRowHeight:0),this.updateRowStartEnd()},t.prototype.showIndicator=function(){var t=this.scrollDirection>=1?this.rowEnd>this.totalsize-1?this.totalsize-1:this.rowEnd:this.rowStart,e=this.vrows.find((function(e){return e.absoluteId===t}));return!(e&&e.data&&e.data.data&&e.data.data.origData||this.dataSource.totalsize<=0)},t.prototype.scrollbarMouseDown=function(){this.manualScroll=!0},t.prototype.scrollbarScroll=function(t){this.manualScroll&&this.gotoPos(this.scrollerRef.nativeElement.scrollTop/(this.scrollerRef.nativeElement.scrollHeight-this.scrollerRef.nativeElement.clientHeight)*this.adjustedTotalsize)},t.prototype.scrollEvent=function(){this.updateEditOverlay(),this.scrollPos=this.tableRef.nativeElement.scrollTop,this.scrollDirection=this.prevScrollPos>this.scrollPos?-1:1;var t=(this.rowCountOnLastLargePage+1)*this.rowHeight+(this.notfittingRowHeight!==this.rowHeight?this.notfittingRowHeight-1:0);if(this.largePage===this.lastLargePage&&this.scrollPos>=t&&(this.scrollPos=this.tableRef.nativeElement.scrollTop=t),this.scrollPos>=this.maxScrollPos&&this.largePage<this.lastLargePage){var e=Math.abs(this.maxScrollPos-this.scrollPos);this.largePage++,this.pageChange(),console.log("pageChange up",e),this.scrollPos=this.tableRef.nativeElement.scrollTop=this.largePage<=1?this.rowHeight:e+1}else if(this.scrollPos<=0&&this.largePage>0){var n=Math.abs(this.scrollPos);this.largePage--,this.pageChange(),console.log("pageChange down",n),this.scrollPos=this.tableRef.nativeElement.scrollTop=this.largePage>=1?this.maxScrollPos-1:this.maxScrollPos-this.rowHeight-n}this.updateRows(),this.scrollPercent=this.rowStart/this.adjustedTotalsize,this.manualScroll||(this.scrollerRef.nativeElement.scrollTop=(this.maxScrollPos+this.notfittingRowHeight)*this.scrollPercent),this.updateDataSource(),this.prevScrollPos=this.scrollPos,this.headerRef&&(this.headerRef.nativeElement.style.marginLeft=-this.tableRef.nativeElement.scrollLeft+"px")},t.prototype.updateDataSource=function(t){if(void 0===t&&(t=!1),t||this.dataSource.viewpos!==this.rowStart||this.dataSource.viewpos+this.dataSource.state.count!==this.rowEnd){this.refreshVrows();var e=Math.ceil(this.viewportSize/this.rowHeight)+1,n=Math.max(this.visibleRowCount-2,e-2);this.dataSource.state.count=n,this.dataSource.state.cursorpos=this.dataSource.cursorAbsPos-this.rowStart,this.dataSource.triggerLoadData.next(),this.cd.detectChanges()}},t.prototype.isEllipsisActive=function(t){return t.offsetWidth<t.scrollWidth},t.prototype.pageChange=function(){this.maxScrollPos=Math.floor(this.largePageSize*this.rowHeight),this.fakeScrollerHeight=this.maxScrollPos+(this.visibleRowCount-1)*this.rowHeight,this.fakeContentRef.nativeElement.style.height=this.fakeScrollerHeight+"px",this.largePage>this.lastLargePage&&(this.largePage=this.lastLargePage,this.scrollPos=this.tableRef.nativeElement.scrollTop=this.rowCountOnLastLargePage*this.rowHeight-1),this.largePageCoeff=this.largePage-1>=0?1:0},t.prototype.updateSize=function(){this.activeRow>this.totalsize-1?this.activeRow=this.totalsize-1:this.activeRow<0&&(this.activeRow=0),this.viewportSize=this.tableRef.nativeElement.clientHeight,this.visibleRowCount=Math.ceil(this.viewportSize/this.rowHeight)+1,-1===this.totalsize&&(this.totalsize=this.visibleRowCount),this.visibleRowCount=this.visibleRowCount>this.totalsize?this.totalsize:this.visibleRowCount,this.notfittingRowHeight=this.rowHeight-this.viewportSize%this.rowHeight,this.calculatedLargePageSize=Math.floor(.5*this.browserMaxSize/this.rowHeight),this.calculatedLargePageSize=15e3,this.adjustedTotalsize=this.totalsize-(this.visibleRowCount-1),this.lastLargePage=Math.floor(this.adjustedTotalsize/this.calculatedLargePageSize),this.rowCountOnLastLargePage=this.adjustedTotalsize%this.calculatedLargePageSize,this.largePageSize=this.adjustedTotalsize>this.calculatedLargePageSize?this.calculatedLargePageSize:this.adjustedTotalsize;var t=Math.abs(this.visibleRowCount-this.vrows.length);if(this.vrows.length<this.visibleRowCount)for(var e=0;e<t;e++)this.vrows.push({virtualId:this.vrows.length,absoluteId:this.vrows.length,pos:0});else if(this.vrows.length>this.visibleRowCount)for(e=0;e<t;e++)this.vrows.pop();this.vrows.forEach((function(t){t.pos=0})),this.maxScrollPos=Math.floor(this.largePageSize*this.rowHeight),this.scrollerContentRef.nativeElement.style.height=this.largePageSize*this.rowHeight+(this.visibleRowCount-1)*this.rowHeight+"px",this.dataSource.totalsize<this.calculatedLargePageSize?(this.renderer.setStyle(this.tableRef.nativeElement,"width","100%"),this.renderer.setStyle(this.tableRef.nativeElement,"padding-right","0")):(this.renderer.setStyle(this.tableRef.nativeElement,"width","calc(100% + "+this.scrollBarWidth+"px)"),this.renderer.setStyle(this.tableRef.nativeElement,"padding-right",this.scrollBarWidth+"px"))},t.prototype.updateRowStartEnd=function(){this.scrollPosCoeff=Math.floor(this.scrollPos/this.rowHeight),this.smallPage=Math.floor(this.scrollPosCoeff/this.visibleRowCount),this.scrollPosCoeffNormal=this.scrollPosCoeff-this.smallPage*this.visibleRowCount,this.rowStart=this.scrollPosCoeff+this.largePage*this.largePageSize-this.largePageCoeff,this.rowEnd=Math.max(this.rowStart+this.visibleRowCount-1-1,this.rowStart)},t.prototype.updateRows=function(){this.updateRowStartEnd();for(var t=0,e=this.vrows;t<e.length;t++)this.updateRow(e[t])},t.prototype.updateRow=function(t){var e=t.virtualId+this.visibleRowCount*this.smallPage+this.largePage*(this.largePageSize-1)+this.largePageCoeff*(this.largePage-1);t.virtualId<this.scrollPosCoeffNormal?(e+=this.visibleRowCount)<this.totalsize&&(t.absoluteId=e,t.pos=t.virtualId*this.rowHeight+this.visibleRowCount*this.rowHeight+this.smallPage*this.rowHeight*this.visibleRowCount):(t.absoluteId=e,t.absoluteId<this.totalsize&&(t.pos=t.virtualId*this.rowHeight+this.smallPage*this.rowHeight*this.visibleRowCount))},t.prototype.refreshVrows=function(){for(var t=0,e=this.vrows;t<e.length;t++){var n=e[t],o=this.dataSource.buffer.get(n.absoluteId);n.data=o}},t.prototype.calculateScrollers=function(){var t="hidden";return this.tableRef&&this.tableRef.nativeElement&&(t=this.cumulatedColumnWidth>this.tableRef.nativeElement.clientWidth?"scroll":"hidden"),{"overflow-x":t}},t.prototype.calculateWidths=function(){if(this.fakeContentRef.nativeElement.style.width="1px",this.bodyRef.nativeElement.children[0]){var t=this.bodyRef.nativeElement.clientWidth;this.scrollBarWidth=this.tableRef.nativeElement.offsetWidth-this.tableRef.nativeElement.clientWidth,this.scrollerRef.nativeElement.style.width=this.scrollBarWidth+"px",this.cumulatedColumnWidth=0;var e=t,n=0;this.dataSource.columns.forEach((function(t){n+=t.length}));for(var o=0,i=0;i<this.dataSource.columns.length;i++){var a=this.dataSource.columns[i];this.columnWidths[i]=e/n*a.length,this.columnWidths[i]<10*a.length&&(this.columnWidths[i]=10*a.length),this.colPositions[i]=i>0?this.colPositions[i-1]+this.columnWidths[i-1]:0,this.stickyBreakpoints[i]=o,a.sticky&&(o+=this.columnWidths[i]),this.cumulatedColumnWidth+=this.columnWidths[i]}}else console.log("returned")},t.prototype.getVisibleColumns=function(){if(this.tableRef&&this.tableRef.nativeElement){for(var t=this.tableRef.nativeElement.clientWidth,e=this.tableRef.nativeElement.scrollLeft,n=0,o=this.dataSource.columns.length-1,i=[],a=[],r=0;r<this.dataSource.columns.length;r++){var s=this.dataSource.columns[r],l=this.colPositions[r];if(l+this.columnWidths[r]<e&&(s.sticky&&i.push(s),n=r+1),l>=t+e){s.sticky&&a.push(s),o=r;break}}return i.concat(this.dataSource.columns.slice(n,o+1))}return this.dataSource.columns},t.prototype.calcMaxBrowserScrollSize=function(){var t=document.createElement("div"),e=t.style;e.position="absolute",e.left="99999999999999px",e.top="9999999999999999px",document.body.appendChild(t);var n=t.getBoundingClientRect().top;return document.body.removeChild(t),n},t.prototype.updateColumns=function(){var t=this;this.dataSource.columns=[],this.dataSource.keyIds=[],this._columns.forEach((function(e,n){var o={description:t.sanitizer.bypassSecurityTrustHtml(e.description),length:e.length,id:e.id,style:e.style,index:n,sticky:e.sticky,containerStyle:e.containerStyle,headerStyle:e.headerStyle,headerContainerStyle:e.headerContainerStyle,extraCellDefinitions:e.extraCellDefinitions,align:e.align,format:e.format,type:e.type};t.dataSource.columns.push(o),t.dataSource.keyIds.push(e.id)}))},t.prototype.format=function(t,e){return this.formatService.format(t,e)},t.prototype.getHeaderContainerStyle=function(t,e){var n=this.columnWidths[e]+(e===this.dataSource.columns.length-1?this.scrollBarWidth:0),o=Object.assign({width:n+"px","max-width":n+"px","min-width":n+"px","text-align":t.align?t.align:"left"},t.headerContainerStyle);return this.handleSticky(Object(a.cloneDeep)(o),t,e)},t.prototype.getHeaderStyle=function(t,e){return t.headerStyle},t.prototype.getRowStyle=function(t){var e={height:this.rowHeight+"px",transform:"translateY("+t.pos+"px)",width:this.cumulatedColumnWidth+"px"};return t.absoluteId===this.dataSource.cursorAbsPos&&(this.selectedVrow=t,this.selectedRowStyle&&Object.assign(e,this.isFocused?this.selectedRowStyle:this.inactiveSelectedRowStyle)),e},t.prototype.getContainerStyle=function(t,e,n,o,i){var a=Object.assign({width:this.columnWidths[n]+"px","max-width":this.columnWidths[n]+"px","min-width":this.columnWidths[n]+"px"},t.containerStyle),r=e&&e.styles&&e.styles[t.id]&&e.styles[t.id].containerStyle;return r&&Object.assign(a,r),o.absoluteId===this.dataSource.cursorAbsPos&&n===this.dataSource.state.selectedColumnIndex&&(this.selectedCellDiv=i,Object.assign(a,this.isFocused?this.selectedCellStyle:this.inactiveSelectedCellStyle)),this.activeRow===o.absoluteId&&n===this.dataSource.state.navigationColumnIndex&&Object.assign(a,this.isFocused?this.navigationCellStyle:this.inactiveNavigationCellStyle),this.handleSticky(a,t,n,o)},t.prototype.handleSticky=function(t,e,n,o){void 0===o&&(o=null);var i=this.colPositions[n];if(e.sticky){var a=this.tableRef.nativeElement.scrollLeft,r=i-this.stickyBreakpoints[n];a>r&&(i+=a-r,t.background="rgba(var(--theme-background-300), 1)",o&&o.absoluteId===this.dataSource.cursorAbsPos&&this.selectedRowStyle&&Object.assign(t,this.isFocused?this.selectedRowStyle:this.inactiveSelectedRowStyle),t["box-shadow"]="3px 0px 2px 2px #00000040",t["z-index"]=2)}return t.left=i+"px",t},t.prototype.getStyle=function(t,e,n){return e&&e.styles&&e.styles[t.id]&&e.styles[t.id].style},t.prototype.getBarStyle=function(t,e,n){return e&&e.styles&&e.styles[t.id]&&e.styles[t.id].barStyle},t.prototype.getCellContent=function(t,e){return t.data&&t.data.data&&t.data.data.processedData?t.data.data.processedData["$"+e.id]?t.data.data.processedData["$"+e.id]:t.data.data.processedData[e.id]:""},t.prototype.mouseEnter=function(t,e,n,o){this.isEllipsisActive(o)&&e&&e.data&&e.data.data&&(this.format(this.getCellContent(e,t),t.format),this.getStyle(t,e.data.data,n))},t.prototype.mouseLeave=function(t,e,n){},t.prototype.trackByFn=function(t,e){return e.absoluteId},t.prototype.trackByFnCell=function(t,e){return e.id},t.prototype.ngOnDestroy=function(){this.removeEditOverlay(),this.dataSource&&this.dataSource.disconnect(),this.timeoutHelper&&clearTimeout(this.timeoutHelper),this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](i.ChangeDetectorRef),i["\u0275\u0275directiveInject"](u.FormatService),i["\u0275\u0275directiveInject"](p.DomSanitizer),i["\u0275\u0275directiveInject"](g.Overlay),i["\u0275\u0275directiveInject"](i.ElementRef),i["\u0275\u0275directiveInject"](i.Injector),i["\u0275\u0275directiveInject"](i.Renderer2))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["admino-table2"]],viewQuery:function(t,e){var n;1&t&&(i["\u0275\u0275staticViewQuery"](O,!0,i.ElementRef),i["\u0275\u0275staticViewQuery"](M,!0,i.ElementRef),i["\u0275\u0275staticViewQuery"](E,!0,i.ElementRef),i["\u0275\u0275staticViewQuery"](_,!0,i.ElementRef),i["\u0275\u0275staticViewQuery"](k,!0),i["\u0275\u0275viewQuery"](I,!0),i["\u0275\u0275staticViewQuery"](j,!0)),2&t&&(i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(e.tableRef=n.first),i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(e.scrollerRef=n.first),i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(e.fakeContentRef=n.first),i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(e.scrollerContentRef=n.first),i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(e.bodyRef=n.first),i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(e.headerRef=n.first),i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(e.mainRef=n.first))},hostBindings:function(t,e){1&t&&i["\u0275\u0275listener"]("focus",(function(t){return e.focusEvent(t)}))("blur",(function(t){return e.blurEvent(t)}))("mouseup",(function(t){return e.mouseUp(t)}),!1,i["\u0275\u0275resolveDocument"])("keydown",(function(t){return e.onKeydownHandler(t)}))},inputs:{dataSource:"dataSource",columns:"columns",indexes:"indexes",autoRefresh:"autoRefresh",oddRowStyle:"oddRowStyle",headerHeight:"headerHeight",rowHeight:"rowHeight",hideHeader:"hideHeader",debug:"debug",selectedRowStyle:"selectedRowStyle",selectedCellStyle:"selectedCellStyle",tableStyle:"tableStyle",inactiveSelectedRowStyle:"inactiveSelectedRowStyle",inactiveSelectedCellStyle:"inactiveSelectedCellStyle",navigationCellStyle:"navigationCellStyle",inactiveNavigationCellStyle:"inactiveNavigationCellStyle",keyOverrides:"keyOverrides"},outputs:{valueChange:"valueChange",cellClick:"cellClick",cellChange:"cellChange",cellDoubleClick:"cellDoubleClick",headerCellClick:"headerCellClick",cellContextMenu:"cellContextMenu",headerCellContextMenu:"headerCellContextMenu"},decls:18,vars:17,consts:[[1,"mainwrapper","admino-table",3,"ngStyle"],["mainRef",""],["class","aheader",3,"ngStyle",4,"ngIf"],[1,"awrapper",3,"ngClass"],["tabIndex","-1",1,"scroller",3,"ngClass","mousedown","scroll"],["scrollerRef",""],[1,"scrollercontent"],["scrollerContentRef",""],[1,"rowindicator",3,"ngClass"],[1,"atable",3,"ngStyle","scroll"],["tableRef",""],[1,"abody"],["bodyRef",""],[1,"fakecontent"],["fakeContentRef",""],["class","arow",3,"ngClass","ngStyle",4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"aheader",3,"ngStyle"],["headerRef",""],["class","ahcell",3,"ngStyle","ngClass","click","contextmenu",4,"ngFor","ngForOf"],[1,"ahcell",3,"ngStyle","ngClass","click","contextmenu"],[1,"cell-content",3,"innerHTML","ngStyle"],[1,"arow",3,"ngClass","ngStyle"],["class","acell",3,"ngClass","ngStyle","click","dblclick","contextmenu",4,"ngFor","ngForOf","ngForTrackBy"],[1,"acell",3,"ngClass","ngStyle","click","dblclick","contextmenu"],["cellRef",""],["class","rowbg",3,"ngStyle",4,"ngIf"],[1,"cell-content",3,"ngStyle","innerHtml"],["class","bar",3,"ngStyle",4,"ngIf"],[1,"rowbg",3,"ngStyle"],[1,"bar",3,"ngStyle"],[1,"row","debug"],[1,"col-6"],[1,"color-accent"]],template:function(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"div",0,1),i["\u0275\u0275template"](2,q,3,4,"div",2),i["\u0275\u0275elementStart"](3,"div",3),i["\u0275\u0275elementStart"](4,"div",4,5),i["\u0275\u0275listener"]("mousedown",(function(){return e.scrollbarMouseDown()}))("scroll",(function(t){return e.scrollbarScroll(t)})),i["\u0275\u0275element"](6,"div",6,7),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](8,"div",8),i["\u0275\u0275text"](9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](10,"div",9,10),i["\u0275\u0275listener"]("scroll",(function(){return e.scrollEvent()})),i["\u0275\u0275elementStart"](12,"div",11,12),i["\u0275\u0275element"](14,"div",13,14),i["\u0275\u0275template"](16,V,2,9,"div",15),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](17,W,129,40,"ng-container",16),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275property"]("ngStyle",e.tableStyle),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!e.hideHeader),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngClass",i["\u0275\u0275pureFunction1"](10,U,!e.dataSource.initialBrowseRequestHappend)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngClass",i["\u0275\u0275pureFunction1"](12,N,e.dataSource.totalsize<e.calculatedLargePageSize)),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngClass",i["\u0275\u0275pureFunction2"](14,$,e.showIndicator()&&e.dataSource.initialBrowseRequestHappend,e.scrollDirection>=1)),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",e.scrollDirection?e.rowEnd+1:e.rowStart+1," "),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngStyle",e.calculateScrollers()),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngForOf",e.vrows)("ngForTrackBy",e.trackByFn),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.debug))},directives:[v.NgStyle,v.NgIf,v.NgClass,v.NgForOf],pipes:[v.DecimalPipe],styles:['[_nghost-%COMP%]{position:relative;height:100%;width:100%;display:inline-block}[_nghost-%COMP%]     .adm-table-bottom-right, [_nghost-%COMP%]     .adm-table-minus-left, [_nghost-%COMP%]     .adm-table-minus-right, [_nghost-%COMP%]     .adm-table-plus-left, [_nghost-%COMP%]     .adm-table-plus-right, [_nghost-%COMP%]     .adm-table-top-right{position:absolute;top:0;right:0;font-size:.85em;padding:.5em}[_nghost-%COMP%]     .adm-table-minus-left, [_nghost-%COMP%]     .adm-table-plus-left{right:auto;left:0}[_nghost-%COMP%]     .adm-table-bottom-right, [_nghost-%COMP%]     .adm-table-top-right{opacity:.5}[_nghost-%COMP%]     .adm-table-bottom-right{top:auto;bottom:0}[_nghost-%COMP%]     .adm-table-plus-left, [_nghost-%COMP%]     .adm-table-plus-right{color:rgba(var(--theme-primary-500),1)}[_nghost-%COMP%]     .adm-table-minus-left, [_nghost-%COMP%]     .adm-table-minus-right{color:rgb(var(--theme-warn-500))}.debug[_ngcontent-%COMP%]{height:400px}.mainwrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;position:relative;border:1px solid rgba(var(--theme-foreground-500),.1)}.mainwrapper[_ngcontent-%COMP%]   .aheader[_ngcontent-%COMP%]{height:51px;min-width:100%;display:flex;border-bottom:1px solid rgba(var(--theme-foreground-500),.1);overflow:hidden;position:relative}.mainwrapper[_ngcontent-%COMP%]   .aheader[_ngcontent-%COMP%]   .ahcell[_ngcontent-%COMP%]{position:absolute;height:100%;max-width:100%;min-width:1px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:flex;border-left:1px solid rgba(var(--theme-foreground-500),.1);cursor:pointer}.mainwrapper[_ngcontent-%COMP%]   .aheader[_ngcontent-%COMP%]   .ahcell.first[_ngcontent-%COMP%]{border-left-width:0}.mainwrapper[_ngcontent-%COMP%]   .aheader[_ngcontent-%COMP%]   .ahcell.last[_ngcontent-%COMP%]{border-right:1px solid rgba(var(--theme-foreground-500),.1)}.mainwrapper[_ngcontent-%COMP%]   .aheader[_ngcontent-%COMP%]   .ahcell[_ngcontent-%COMP%]   .cell-content[_ngcontent-%COMP%]{align-self:center;display:inline-block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-left:10px;padding-right:10px}.mainwrapper[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}.mainwrapper[_ngcontent-%COMP%]   .awrapper[_ngcontent-%COMP%]{flex:1;position:relative;overflow:hidden}.mainwrapper[_ngcontent-%COMP%]   .awrapper.hidetable[_ngcontent-%COMP%]{opacity:0}.mainwrapper[_ngcontent-%COMP%]   .awrapper[_ngcontent-%COMP%]   .scroller[_ngcontent-%COMP%]{width:10px;height:100%;position:absolute;right:0;z-index:10;overflow:hidden;overflow-y:auto}.mainwrapper[_ngcontent-%COMP%]   .awrapper[_ngcontent-%COMP%]   .rowindicator[_ngcontent-%COMP%]{position:absolute;background-color:rgba(var(--theme-background-300),1);border-radius:7px;padding:1px 7px;z-index:4;font-size:12px;font-weight:500;top:10px;left:10px;opacity:0;transition:opacity .5s;pointer-events:none}.mainwrapper[_ngcontent-%COMP%]   .awrapper[_ngcontent-%COMP%]   .rowindicator.bottom[_ngcontent-%COMP%]{top:auto;bottom:10px}.mainwrapper[_ngcontent-%COMP%]   .awrapper[_ngcontent-%COMP%]   .rowindicator.show[_ngcontent-%COMP%]{opacity:1}.mainwrapper[_ngcontent-%COMP%]   .awrapper[_ngcontent-%COMP%]   .atable[_ngcontent-%COMP%]{height:100%;width:100%;overflow-x:auto;overflow-y:auto;position:relative}.mainwrapper[_ngcontent-%COMP%]   .awrapper[_ngcontent-%COMP%]   .atable[_ngcontent-%COMP%]   .fakecontent[_ngcontent-%COMP%]{position:absolute;width:1px;pointer-events:none}.mainwrapper[_ngcontent-%COMP%]   .awrapper[_ngcontent-%COMP%]   .atable[_ngcontent-%COMP%]   .abody[_ngcontent-%COMP%]{width:100%;min-height:1px;position:relative}.mainwrapper[_ngcontent-%COMP%]   .awrapper[_ngcontent-%COMP%]   .atable[_ngcontent-%COMP%]   .abody[_ngcontent-%COMP%]   .arow[_ngcontent-%COMP%]{display:flex;position:absolute;min-width:100%;overflow:hidden}.mainwrapper[_ngcontent-%COMP%]   .awrapper[_ngcontent-%COMP%]   .atable[_ngcontent-%COMP%]   .abody[_ngcontent-%COMP%]   .arow.rowselected[_ngcontent-%COMP%]{box-shadow:inset 0 0 1px 1px rgba(var(--theme-foreground-500),.2);background-color:rgba(var(--theme-background-700),.3)}.mainwrapper[_ngcontent-%COMP%]   .awrapper[_ngcontent-%COMP%]   .atable[_ngcontent-%COMP%]   .abody[_ngcontent-%COMP%]   .arow.evenrow[_ngcontent-%COMP%]   .acell[_ngcontent-%COMP%]   .rowbg[_ngcontent-%COMP%]{content:"";width:100%;height:100%;position:absolute;top:0;opacity:.02}.mainwrapper[_ngcontent-%COMP%]   .awrapper[_ngcontent-%COMP%]   .atable[_ngcontent-%COMP%]   .abody[_ngcontent-%COMP%]   .arow.lastrow[_ngcontent-%COMP%]   .acell[_ngcontent-%COMP%]{border-bottom-width:1px;border-bottom-style:solid}.mainwrapper[_ngcontent-%COMP%]   .awrapper[_ngcontent-%COMP%]   .atable[_ngcontent-%COMP%]   .abody[_ngcontent-%COMP%]   .arow[_ngcontent-%COMP%]   .acell[_ngcontent-%COMP%]{height:100%;box-sizing:border-box;border-top-width:1px;border-top-style:solid;border-left-width:1px;border-left-style:solid;position:relative;max-width:100%;min-width:1px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:flex;position:absolute}.mainwrapper[_ngcontent-%COMP%]   .awrapper[_ngcontent-%COMP%]   .atable[_ngcontent-%COMP%]   .abody[_ngcontent-%COMP%]   .arow[_ngcontent-%COMP%]   .acell[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{display:none;position:absolute;top:0;height:100%;width:100%;background:red;transition:width .3s ease-in-out,background-color .3s ease-in-out}.mainwrapper[_ngcontent-%COMP%]   .awrapper[_ngcontent-%COMP%]   .atable[_ngcontent-%COMP%]   .abody[_ngcontent-%COMP%]   .arow[_ngcontent-%COMP%]   .acell.first[_ngcontent-%COMP%]{border-left-width:0}.mainwrapper[_ngcontent-%COMP%]   .awrapper[_ngcontent-%COMP%]   .atable[_ngcontent-%COMP%]   .abody[_ngcontent-%COMP%]   .arow[_ngcontent-%COMP%]   .acell.last[_ngcontent-%COMP%]{border-right-width:1px;border-right-style:solid}.mainwrapper[_ngcontent-%COMP%]   .awrapper[_ngcontent-%COMP%]   .atable[_ngcontent-%COMP%]   .abody[_ngcontent-%COMP%]   .arow[_ngcontent-%COMP%]   .acell[_ngcontent-%COMP%]   .cell-content[_ngcontent-%COMP%]{z-index:1;align-self:center;display:inline-block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-left:10px;padding-right:10px;white-space:pre}.awrapper[_ngcontent-%COMP%]   .abody[_ngcontent-%COMP%]   .arow.evenrow[_ngcontent-%COMP%]   .acell[_ngcontent-%COMP%]   .rowbg[_ngcontent-%COMP%]{background-color:rgba(var(--theme-foreground-500),1)}.awrapper[_ngcontent-%COMP%]   .abody[_ngcontent-%COMP%]   .arow[_ngcontent-%COMP%]   .acell[_ngcontent-%COMP%]{border-color:rgba(var(--theme-foreground-500),.1)}.awrapper[_ngcontent-%COMP%]   .abody[_ngcontent-%COMP%]   .arow[_ngcontent-%COMP%]   .acell.columnnavigation[_ngcontent-%COMP%], .awrapper[_ngcontent-%COMP%]   .abody[_ngcontent-%COMP%]   .arow[_ngcontent-%COMP%]   .acell.columnselected[_ngcontent-%COMP%]{box-shadow:inset 0 0 1px 1px rgba(var(--theme-foreground-500),.5)}'],data:{animation:[h]}}),t}(),Y=n("17wl"),X=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Y.__extends)(e,t),e.prototype.onCreate=function(t,e){var n,o=this;this.valueChangeSub=this.context.control.valueChanges.pipe(Object(s.takeUntil)(this.context.destroy$),Object(s.debounceTime)((null===(n=e.config)||void 0===n?void 0:n.debounce)?e.config.debounce:0),Object(s.filter)((function(t){var e;return!Object(a.isEqual)(null===(e=o.oldVal)||void 0===e?void 0:e.keys,null==t?void 0:t.keys)}))).subscribe((function(t){o.pluginInstance.table.setPrevValues(),o.fire("keyChange").subscribe(),o.oldVal=Object(a.cloneDeep)(t)}))},e.prototype.onUpdate=function(){},e.prototype.onDestroy=function(){this.valueChangeSub&&this.valueChangeSub.unsubscribe()},e}(u.InteractionBase),K=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Y.__extends)(e,t),e.prototype.onCreate=function(t,e){var n=this;this.context.pluginComponentRef.instance.cellContextMenu$.pipe(Object(s.takeUntil)(this.destroy$)).subscribe((function(t){var o=t.e;o.preventDefault(),e.config.items&&n.context.action.handleResponse({setContextMenu:{items:e.config.items,x:o.clientX,y:o.clientY,__context:n.context}}),e.actions&&n.fire({x:o.clientX,y:o.clientY,keys:t.keys,column:t.column,rowAbsoluteIndex:t.rowAbsoluteIndex},(function(t){return t.setContextMenu&&(t.setContextMenu.x=o.clientX,t.setContextMenu.y=o.clientY,t.setContextMenu.__context=n.context),t})).subscribe()}))},e.prototype.onUpdate=function(){},e.prototype.onDestroy=function(){},e}(u.InteractionBase),G=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Y.__extends)(e,t),e.prototype.onCreate=function(t,e){var n=this;this.context.pluginComponentRef.instance.headerCellContextMenu$.pipe(Object(s.takeUntil)(this.destroy$)).subscribe((function(t){var o=t.e;o.preventDefault(),e.config.items&&n.context.action.handleResponse({setContextMenu:{items:e.config.items,x:o.clientX,y:o.clientY,__context:n.context}}),e.actions&&n.fire({x:o.clientX,y:o.clientY,keys:t.keys,column:t.column,rowAbsoluteIndex:t.rowAbsoluteIndex},(function(t){return t.setContextMenu&&(t.setContextMenu.x=o.clientX,t.setContextMenu.y=o.clientY,t.setContextMenu.__context=n.context),t})).subscribe()}))},e.prototype.onUpdate=function(){},e.prototype.onDestroy=function(){},e}(u.InteractionBase),J=function(){function t(t,e,n){this.context=t,this.sanitizer=e,this.cd=n,this.cellContextMenu$=new r.Subject,this.headerCellContextMenu$=new r.Subject,this.isFocused=!1,this.context.registerInteraction("cellContextMenu",K),this.context.registerInteraction("headerCellContextMenu",G),this.context.registerInteraction("keyChange",X)}return t.prototype.ngOnInit=function(){var t=this,e=this.context.pluginConfig;this.dataSource=new c({listFunction:function(n,o,i,a,r,s,l){return t.context.api.list(e.config.viewName,n,o,i,a,r,s,l,e.config.customVars)}},this.sanitizer),this.context.redraw$.pipe(Object(s.takeUntil)(this.context.destroy$),Object(s.debounceTime)(500)).subscribe((function(e){t.table.resize(null),t.cd.markForCheck()})),this.context.update$.pipe(Object(s.takeUntil)(this.context.destroy$)).subscribe((function(e){t.onChange(e),t.cd.markForCheck()}))},t.prototype.ngAfterViewInit=function(){var t=this;this.context.pluginConfig.value&&(this.dataSource.state=Object.assign(this.dataSource.state,this.context.pluginConfig.value),this.dataSource.setKeys(this.context.pluginConfig.value.keys),this.table.dataSource.loadData().then((function(e){t.table.gotoPos(t.dataSource.viewpos),t.table.setActiveRow(t.dataSource.cursorAbsPos)})))},t.prototype.setValue=function(t){this.context.control.setValue(t)},t.prototype.handleCellChange=function(t){this.context.firePluginInteractions("cellChange").subscribe()},t.prototype.handleCellClick=function(t){this.context.firePluginInteractions("cellClick").subscribe()},t.prototype.handleCellDoubleClick=function(t){this.context.firePluginInteractions("cellDoubleClick").subscribe()},t.prototype.handleHeaderCellClick=function(t){this.context.firePluginInteractions("headerCellClick").subscribe()},t.prototype.handleCellContextMenu=function(t){this.cellContextMenu$.next(t)},t.prototype.handleHeaderCellContextMenu=function(t){this.headerCellContextMenu$.next(t)},t.prototype.onChange=function(t){var e,n,o,i=this,r=t.compareResult.diff;console.log(r);var s=Object(u.deepCompare)(null===(e=t.prevConfig)||void 0===e?void 0:e.config,null===(n=t.newConfig)||void 0===n?void 0:n.config),l=t.commands,d=s.diff,h=this.context.pluginConfig.config,p=!1;if(d.viewName&&(this.dataSource.clearRequests(),this.dataSource.buffer.clearAll(),this.dataSource.initialBrowseRequestHappend=!1,this.dataSource=new c({listFunction:function(t,e,n,o,a,r,s){return i.context.api.list(i.context.pluginConfig.config.viewName,t,e,n,o,a,r,s,i.context.pluginConfig.config.customVars)}},this.sanitizer),p=!0),l.clearCache&&(this.dataSource.buffer.clearAll(),p=!0),d.columns&&(p=!0,this.table.columns=h.columns),d.indexes&&(this.table.indexes=h.indexes),d.rowHeight&&(p=!0),a.isNil(r.value)||(this.dataSource.state=Object.assign(this.dataSource.state,t.newConfig.value),(null===(o=t.newConfig.value)||void 0===o?void 0:o.keys)&&this.dataSource.setKeys(t.newConfig.value.keys)),d.hidden&&(p=!0),p&&(this.cd.detectChanges(),this.table.reinit()),r.value||l.forceRefresh){var g=a.isNil(t.newConfig.value)||void 0===t.newConfig.value.shift?0:t.newConfig.value.shift;this.table.dataSource.loadData(g).then((function(t){i.table.gotoPos(i.dataSource.viewpos),i.table.setActiveRow(i.dataSource.cursorAbsPos),i.table.scrollEvent(),i.table.updateRows(),i.table.refreshVrows()}))}},t.prototype.onDestroy=function(){},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](u.PLUGIN_CONTEXT),i["\u0275\u0275directiveInject"](p.DomSanitizer),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["app-table"]],viewQuery:function(t,e){var n;1&t&&i["\u0275\u0275staticViewQuery"](Q,!0),2&t&&i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(e.table=n.first)},decls:1,vars:16,consts:[["tabindex","0","data-focus-target","",3,"dataSource","indexes","columns","autoRefresh","rowHeight","headerHeight","oddRowStyle","hideHeader","debug","selectedRowStyle","selectedCellStyle","inactiveSelectedRowStyle","inactiveSelectedCellStyle","navigationCellStyle","inactiveNavigationCellStyle","tableStyle","cellClick","cellChange","cellDoubleClick","headerCellClick","valueChange","cellContextMenu","headerCellContextMenu"]],template:function(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"admino-table2",0),i["\u0275\u0275listener"]("cellClick",(function(t){return e.handleCellClick(t)}))("cellChange",(function(t){return e.handleCellChange(t)}))("cellDoubleClick",(function(t){return e.handleCellDoubleClick(t)}))("headerCellClick",(function(t){return e.handleHeaderCellClick(t)}))("valueChange",(function(t){return e.setValue(t)}))("cellContextMenu",(function(t){return e.handleCellContextMenu(t)}))("headerCellContextMenu",(function(t){return e.handleHeaderCellContextMenu(t)})),i["\u0275\u0275elementEnd"]()),2&t&&i["\u0275\u0275property"]("dataSource",e.dataSource)("indexes",e.context.pluginConfig.config.indexes)("columns",e.context.pluginConfig.config.columns)("autoRefresh",e.context.pluginConfig.config.autoRefresh)("rowHeight",e.context.pluginConfig.config.rowHeight)("headerHeight",e.context.pluginConfig.config.headerHeight)("oddRowStyle",e.context.pluginConfig.config.oddRowStyle)("hideHeader",e.context.pluginConfig.config.hideHeader)("debug",e.context.pluginConfig.config.debug)("selectedRowStyle",e.context.pluginConfig.config.selectedRowStyle)("selectedCellStyle",e.context.pluginConfig.config.selectedCellStyle)("inactiveSelectedRowStyle",e.context.pluginConfig.config.inactiveSelectedRowStyle)("inactiveSelectedCellStyle",e.context.pluginConfig.config.inactiveSelectedCellStyle)("navigationCellStyle",e.context.pluginConfig.config.navigationCellStyle)("inactiveNavigationCellStyle",e.context.pluginConfig.config.inactiveNavigationCellStyle)("tableStyle",e.context.pluginConfig.config.tableStyle)},directives:[Q],styles:["[_nghost-%COMP%]{height:100%;width:100%;overflow:hidden;display:inline-block}"],changeDetection:0}),t}(),Z=function(){function t(){}return t.entry=J,t.\u0275mod=i["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=i["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},imports:[[v.CommonModule,o.MatFormFieldModule,o.MatIconModule,o.MatInputModule,o.MatCheckboxModule,o.MatSelectModule,f.ReactiveFormsModule]]}),t}();e.default=Z}})}));